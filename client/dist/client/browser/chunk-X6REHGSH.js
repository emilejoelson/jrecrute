import{g as F,h as q,i as G}from"./chunk-5HKSMYZ6.js";import{a as h}from"./chunk-S5COJ7GL.js";import{b as H,d as R,h as U}from"./chunk-AA5UGRVV.js";import{t as z}from"./chunk-3KNO5B5Q.js";import{p as A}from"./chunk-TYWYGKBN.js";import"./chunk-PZKXZ6XN.js";import{j as T,l as $,n as V,o as j,r as L}from"./chunk-E3YMVHEH.js";import{$b as k,Aa as N,Bc as m,Cb as g,Cc as c,Ec as B,Nb as s,Xb as t,Yb as n,Zb as f,_b as E,ac as w,da as M,dc as b,ec as u,fb as O,hb as I,j as S,mb as l,nc as D,oa as x,oc as i,pc as d,qc as y,xa as _,xb as P,ya as v,za as C}from"./chunk-VJULP7QK.js";function J(r,o){r&1&&(t(0,"div",5),f(1,"div",6),n())}function K(r,o){if(r&1){let e=w();t(0,"div",7)(1,"p"),i(2),n(),t(3,"button",8),b("click",function(){_(e);let p=u();return v(p.navigateBack())}),i(4," Back to Newsletters "),n()()}if(r&2){let e=o.ngIf;l(2),y("Error loading newsletter: ",(e==null?null:e.message)||"Unknown error","")}}function Q(r,o){if(r&1&&(t(0,"div",28),f(1,"img",29),n()),r&2){let e=u().ngIf;l(),s("src",e.image,I)}}function W(r,o){r&1&&(t(0,"div",30),C(),t(1,"svg",31),f(2,"path",32),n()())}function X(r,o){if(r&1){let e=w();E(0),t(1,"div",9)(2,"button",10),b("click",function(){_(e);let p=u();return v(p.navigateBack())}),C(),t(3,"svg",11),f(4,"path",12),n(),i(5," Back to Newsletters "),n(),N(),t(6,"span",13),i(7),m(8,"titlecase"),n()(),t(9,"div",14)(10,"div",15),g(11,Q,2,1,"div",16)(12,W,3,0,"div",17),t(13,"div",18)(14,"h1",19),i(15),n(),t(16,"p",20),i(17),n(),t(18,"div",21)(19,"div")(20,"p",22),i(21,"Frequency:"),n(),t(22,"p",23),i(23),m(24,"titlecase"),n()(),t(25,"div")(26,"p",22),i(27,"Created By:"),n(),t(28,"p",23),i(29),n()(),t(30,"div")(31,"p",22),i(32,"Created On:"),n(),t(33,"p",23),i(34),n()(),t(35,"div")(36,"p",22),i(37,"Published On:"),n(),t(38,"p",23),i(39),n()(),t(40,"div")(41,"p",22),i(42,"Recipients:"),n(),t(43,"p",23),i(44),n()(),t(45,"div")(46,"p",22),i(47,"Sent to Subscribers:"),n(),t(48,"p",23),i(49),n()()()()()(),t(50,"div",24)(51,"h2",25),i(52,"Newsletter Content"),n(),t(53,"div",26),f(54,"div",27),n()(),k()}if(r&2){let e=o.ngIf,a=u();l(6),s("ngClass",a.getStatusClass(e.status)),l(),y(" ",c(8,13,e.status)," "),l(4),s("ngIf",e.image),l(),s("ngIf",!e.image),l(3),d(e.title),l(2),d(e.description),l(6),d(c(24,15,e.publishFrequency)),l(6),d(a.getCreatorName(e)),l(5),d(a.formatDate(e.createdAt)),l(5),d(e.publishDate?a.formatDate(e.publishDate):"Not published yet"),l(5),d(e.recipientCount),l(5),d(e.sentToSubscribers?"Yes":"No"),l(5),s("innerHTML",e.content,O)}}function Z(r,o){if(r&1){let e=w();t(0,"div",34)(1,"p",35),i(2,"No newsletter found."),n(),t(3,"button",36),b("click",function(){_(e);let p=u(2);return v(p.navigateBack())}),i(4," Back to Newsletters "),n()()}}function ee(r,o){if(r&1&&(g(0,Z,5,0,"div",33),m(1,"async"),m(2,"async")),r&2){let e=u();s("ngIf",!c(1,1,e.loading$)&&!c(2,3,e.error$))}}var Y=class r{destroy$=new S;store=x(A);route=x(H);router=x(R);newsletter$=this.store.select(F);loading$=this.store.select(q);error$=this.store.select(G);ngOnInit(){this.route.paramMap.pipe(M(this.destroy$)).subscribe(o=>{let e=o.get("id");e&&this.store.dispatch(h.loadNewsletter({id:e}))})}navigateBack(){this.router.navigate(["/dashboard/newsletter"])}formatDate(o){return o?new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}getStatusClass(o){switch(o){case"draft":return"bg-gray-700 text-gray-300";case"scheduled":return"bg-yellow-900/30 text-yellow-300";case"published":return"bg-green-900/30 text-green-300";default:return"bg-gray-700 text-gray-300"}}getCreatorName(o){if(typeof o.createdBy=="string")return"Unknown";let e=o.createdBy.personalInfo;return e?`${e.firstName} ${e.lastName}`:"Unknown"}ngOnDestroy(){this.store.dispatch(h.clearSelectedNewsletter()),this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=P({type:r,selectors:[["app-newsletter-detail"]],decls:9,vars:10,consts:[["noNewsletter",""],[1,"container","mx-auto","py-6","px-4","sm:px-6","lg:px-8"],["class","flex justify-center items-center min-h-[50vh]",4,"ngIf"],["class","bg-red-900/30 text-red-300 p-4 rounded-lg",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"flex","justify-center","items-center","min-h-[50vh]"],[1,"animate-spin","rounded-full","h-12","w-12","border-t-2","border-b-2","border-purple-500"],[1,"bg-red-900/30","text-red-300","p-4","rounded-lg"],[1,"mt-4","bg-gray-800","hover:bg-gray-700","text-white","py-2","px-4","rounded","transition-colors",3,"click"],[1,"flex","items-center","justify-between","mb-6"],[1,"flex","items-center","text-gray-400","hover:text-white","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","mr-2"],["fill-rule","evenodd","d","M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z","clip-rule","evenodd"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-sm","font-medium",3,"ngClass"],[1,"bg-gray-800","border","border-gray-700","rounded-lg","p-6","mb-6"],[1,"flex","items-start"],["class","flex-shrink-0 h-32 w-32 rounded-md overflow-hidden bg-gray-700 mr-6",4,"ngIf"],["class","flex-shrink-0 h-32 w-32 rounded-md overflow-hidden bg-gray-700 mr-6 flex items-center justify-center text-gray-500",4,"ngIf"],[1,"flex-1"],[1,"text-2xl","font-bold","mb-2"],[1,"text-gray-400","mb-4"],[1,"grid","grid-cols-2","gap-4"],[1,"text-sm","text-gray-500"],[1,"text-sm"],[1,"bg-gray-800","border","border-gray-700","rounded-lg","p-6"],[1,"text-xl","font-bold","mb-4"],[1,"prose","prose-invert","max-w-none"],[3,"innerHTML"],[1,"flex-shrink-0","h-32","w-32","rounded-md","overflow-hidden","bg-gray-700","mr-6"],["alt","Newsletter cover",1,"h-full","w-full","object-cover",3,"src"],[1,"flex-shrink-0","h-32","w-32","rounded-md","overflow-hidden","bg-gray-700","mr-6","flex","items-center","justify-center","text-gray-500"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-12","w-12"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],["class","bg-gray-800 border border-gray-700 rounded-lg p-6 text-center",4,"ngIf"],[1,"bg-gray-800","border","border-gray-700","rounded-lg","p-6","text-center"],[1,"text-gray-400"],[1,"mt-4","bg-purple-600","hover:bg-purple-700","text-white","py-2","px-4","rounded","transition-colors",3,"click"]],template:function(e,a){if(e&1&&(t(0,"div",1),g(1,J,2,0,"div",2),m(2,"async"),g(3,K,5,1,"div",3),m(4,"async"),g(5,X,55,17,"ng-container",4),m(6,"async"),g(7,ee,3,5,"ng-template",null,0,B),n()),e&2){let p=D(8);l(),s("ngIf",c(2,4,a.loading$)),l(2),s("ngIf",c(4,6,a.error$)),l(2),s("ngIf",c(6,8,a.newsletter$))("ngIfElse",p)}},dependencies:[L,T,$,V,j,z,U],styles:["[_nghost-%COMP%]{display:block}.prose[_ngcontent-%COMP%]{color:#d1d5db}.prose[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .prose[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .prose[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .prose[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .prose[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .prose[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#fff;margin-top:1.5em;margin-bottom:.75em}.prose[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1.25em}.prose[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .prose[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{padding-left:1.5em;margin-bottom:1.25em}.prose[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.5em}.prose[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:.375rem;margin:1.5em 0}.prose[_ngcontent-%COMP%]   blockquote[_ngcontent-%COMP%]{border-left:4px solid #6d28d9;padding-left:1em;font-style:italic;color:#9ca3af}.prose[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{background-color:#1f2937;padding:1em;border-radius:.375rem;overflow-x:auto;margin:1.5em 0}.prose[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background-color:#1f2937;padding:.2em .4em;border-radius:.25rem}"]})};export{Y as NewsletterDetailComponent};
