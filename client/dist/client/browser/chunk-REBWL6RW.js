import{b as O,c as G,m as z}from"./chunk-3AMIHH2V.js";import{d as T}from"./chunk-3W3RF37I.js";import{a as $}from"./chunk-FSCR26IA.js";import{c as x,f as A,h as D,j as R,r as H,s as N,t as q}from"./chunk-KOAA4ZQL.js";import{p as V}from"./chunk-P2V5UVRT.js";import"./chunk-TOR7EDOA.js";import{c as j,d as B}from"./chunk-4P2RETCG.js";import{k as I,p as P}from"./chunk-ACVSFJE2.js";import{Aa as f,Ib as p,Nb as d,Pb as k,Qb as F,Rb as L,Sb as o,Tb as r,Ub as a,Xb as M,Yb as u,Zb as c,dc as l,e as C,jb as s,kb as b,nc as E,pc as w,qc as v,tb as S,xa as _,ya as y,yb as h,za as m}from"./chunk-AAWMO74Z.js";var J=n=>({"bg-green-500 hover:bg-green-600":n});function K(n,i){if(n&1){let e=M();o(0,"div")(1,"app-custom-input",18),w(2,"translate"),u("togglePassword",function(){_(e);let g=c(2);return y(g.togglePasswordVisibility())}),r()()}if(n&2){let e=c().$implicit,t=c();s(),p("id",e.id)("classInput",e.classControl)("classLabel",e.classLabel)("title",v(2,9,e.title))("control",t.loginForm.get(e.id))("formGroup",t.loginForm)("type",t.passwordVisibility?"text":"password")("placeholder",e.placeholder||"")("hasTogglePassword",!0)}}function Q(n,i){if(n&1&&(a(0,"app-custom-input",17),w(1,"translate")),n&2){let e=c().$implicit,t=c();p("id",e.id)("classInput",e.classControl)("classLabel",e.classLabel)("title",v(1,7,e.title))("control",t.loginForm.get(e.id))("formGroup",t.loginForm)("placeholder",e.placeholder||"")}}function U(n,i){if(n&1&&(o(0,"div"),h(1,K,3,11,"div")(2,Q,2,9,"app-custom-input",17),r()),n&2){let e=i.$implicit;s(),d(e.type==="password"?1:2)}}function W(n,i){n&1&&(m(),o(0,"svg",19),a(1,"circle",20)(2,"path",21),r(),f(),o(3,"span"),l(4,"Connexion en cours..."),r())}function X(n,i){n&1&&(m(),o(0,"svg",22),a(1,"path",23),r(),f(),o(2,"span"),l(3,"Connect\xE9 avec succ\xE8s!"),r())}function Z(n,i){n&1&&(o(0,"span"),l(1,"Se connecter"),r(),m(),o(2,"svg",24),a(3,"path",25),r())}var Y=class n{constructor(i,e,t){this.fb=i;this.router=e;this.store=t;this.initForm()}loginForm;isSubmitting=!1;isSuccess=!1;passwordVisibility=!1;loginError=null;commonInputClass="peer w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-200 focus:outline-none focus:border-purple-500 appearance-none";commonLabelClass="left-3 -top-2.5 text-sm text-gray-600 bg-white px-1";subscriptions=new C;formFields={accountInfo:[{id:"email",type:"email",title:"Adresse email",classControl:this.commonInputClass,classLabel:this.commonLabelClass,placeholder:"votre.email@exemple.com"},{id:"password",type:"password",title:"Mot de passe",classControl:this.commonInputClass,classLabel:this.commonLabelClass,placeholder:"Entrez votre mot de passe"}]};ngOnInit(){this.subscriptions.add(this.store.select(G).subscribe(i=>{this.isSubmitting=i})),this.subscriptions.add(this.store.select(O).subscribe(i=>{this.isSuccess=i}))}ngOnDestroy(){this.subscriptions.unsubscribe()}onSignup(){this.router.navigate(["/inscription"]),window.scrollTo(0,0)}initForm(){let i={};this.formFields.accountInfo.forEach(e=>{let t=[x.required];e.id==="email"&&t.push(x.email),i[e.id]=["",t]}),this.loginForm=this.fb.group(i)}togglePasswordVisibility(){this.passwordVisibility=!this.passwordVisibility}onSubmit(){if(this.loginForm.valid){let i={email:this.loginForm.get("email")?.value,password:this.loginForm.get("password")?.value};this.store.dispatch(z.login(i))}else Object.keys(this.loginForm.controls).forEach(i=>{this.loginForm.get(i)?.markAsTouched()})}forgotPassword(){this.router.navigate(["/reset-password"])}static \u0275fac=function(e){return new(e||n)(b(H),b(T),b(V))};static \u0275cmp=S({type:n,selectors:[["app-login"]],decls:29,vars:8,consts:[[1,"bg-white","rounded-3xl","shadow-2xl","max-w-md","w-full","p-6","md:p-8"],[1,"flex","justify-center","mb-8"],[1,"text-3xl","font-bold","text-indigo-800"],[1,"bg-indigo-100","p-3","rounded-full"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-8","h-8","text-indigo-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"space-y-4"],[1,"flex","items-center","justify-between"],[1,"flex","items-center"],["type","checkbox","id","remember",1,"form-checkbox","h-4","w-4","text-indigo-600","rounded","border-gray-300","focus:ring-indigo-500"],["for","remember",1,"ml-2","text-sm","text-gray-700"],["type","button",1,"text-indigo-600","text-sm","hover:underline",3,"click"],["type","submit",1,"w-full","bg-[#60A5FA]","hover:bg-app-primary-purple","text-white","py-3","px-4","rounded-xl","font-medium","text-lg","flex","items-center","justify-center","transition-all","duration-300","transform","hover:scale-[1.02]",3,"disabled","ngClass"],[1,"text-center","mt-8"],[1,"text-gray-600"],[1,"text-indigo-600","cursor-pointer","hover:underline","font-medium",3,"click"],[3,"id","classInput","classLabel","title","control","formGroup","placeholder"],[3,"togglePassword","id","classInput","classLabel","title","control","formGroup","type","placeholder","hasTogglePassword"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-5","h-5","mr-2","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-5","h-5","ml-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M14 5l7 7m0 0l-7 7m7-7H3"]],template:function(e,t){e&1&&(o(0,"div",0)(1,"div",1)(2,"h1",2),l(3,"Connexion"),r()(),o(4,"div",1)(5,"div",3),m(),o(6,"svg",4),a(7,"path",5),r()()(),f(),o(8,"form",6),u("ngSubmit",function(){return t.onSubmit()}),o(9,"div",7),F(10,U,3,1,"div",null,k),r(),o(12,"div",8)(13,"div",9),a(14,"input",10),o(15,"label",11),l(16," Se souvenir de moi "),r()(),o(17,"button",12),u("click",function(){return t.forgotPassword()}),l(18," Mot de passe oubli\xE9? "),r()(),o(19,"div")(20,"button",13),h(21,W,5,0)(22,X,4,0)(23,Z,4,0),r()()(),o(24,"div",14)(25,"p",15),l(26," Vous n'avez pas de compte? "),o(27,"button",16),u("click",function(){return t.onSignup()}),l(28,"Inscrivez-vous"),r()()()()),e&2&&(s(8),p("formGroup",t.loginForm),s(2),L(t.formFields.accountInfo),s(10),p("disabled",t.isSubmitting)("ngClass",E(6,J,t.isSuccess)),s(),d(t.isSubmitting?21:-1),s(),d(t.isSuccess&&!t.isSubmitting?22:-1),s(),d(!t.isSubmitting&&!t.isSuccess?23:-1))},dependencies:[P,I,q,D,A,R,N,$,B,j],styles:['[_nghost-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:3rem 1rem;background-image:linear-gradient(135deg,#f0f4f8,#e5e9f2)}.form-checkbox[_ngcontent-%COMP%]:checked{background-color:#6366f1;border-color:#6366f1}button[type=submit][_ngcontent-%COMP%]{position:relative;overflow:hidden;transition:all .3s}button[type=submit][_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:all .6s}button[type=submit][_ngcontent-%COMP%]:hover:before{left:100%}button[type=submit][_ngcontent-%COMP%]:disabled{background:#9ca3af;cursor:not-allowed}.social-btn[_ngcontent-%COMP%]{display:inline-flex;width:100%;justify-content:center;border-radius:.375rem;border-width:1px;--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1));padding:.5rem 1rem;font-size:.875rem;line-height:1.25rem;font-weight:500;--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1));--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.social-btn[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.social-btn[_ngcontent-%COMP%]{transition:all .3s ease}.social-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}']})};export{Y as LoginComponent};
