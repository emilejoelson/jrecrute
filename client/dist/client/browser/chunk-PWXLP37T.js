import{a as ct,b as dt,c as pt,d as mt,e as ut,f as gt,j as _t,k as ht,l as ft,m as he,n as fe,o as Ce,p as be}from"./chunk-5HKSMYZ6.js";import{a as k}from"./chunk-S5COJ7GL.js";import{m as rt,n as lt,p as at,q as st}from"./chunk-ZMJW5JPU.js";import{a as Fe}from"./chunk-UZE7R2MP.js";import{a as N}from"./chunk-WLTH2OZR.js";import{h as Xe}from"./chunk-AA5UGRVV.js";import{b as Q,c as $,e as J,f as Ze,g as _e,h as et,i as tt,j as nt,m as it,n as Y,o as K,p as X,r as ot,s as H,t as Z}from"./chunk-3KNO5B5Q.js";import{p as ge}from"./chunk-TYWYGKBN.js";import"./chunk-PZKXZ6XN.js";import{j as Je,k as Ye,l as pe,n as me,o as Ke,p as ue,r as M}from"./chunk-E3YMVHEH.js";import{$b as F,Aa as S,Bc as T,Cb as f,Cc as E,Dc as Qe,G as Ie,Ga as x,Mb as Re,Nb as _,Ob as Oe,Pb as I,Qb as We,Sb as h,Ub as U,Vb as z,Wb as A,Xb as t,Yb as o,Zb as c,_b as V,ac as b,da as P,dc as d,ec as p,fc as qe,gc as ce,hb as se,j as ae,kc as te,lb as Ge,lc as ne,mb as s,mc as ie,nc as Ve,oa as j,oc as a,pc as R,qc as y,rc as oe,sc as de,tc as G,uc as W,v as Ue,vc as q,xa as u,xb as v,ya as g,za as C}from"./chunk-VJULP7QK.js";function xt(r,n){if(r&1&&(t(0,"div",0)(1,"div",1)(2,"div",2),c(3,"app-icon",3),t(4,"span",4),a(5,"Total Newsletters"),o()(),t(6,"div",5),a(7),o()(),t(8,"div",1)(9,"div",6),c(10,"app-icon",7),t(11,"span",4),a(12,"Published"),o()(),t(13,"div",5),a(14),o()(),t(15,"div",1)(16,"div",8),c(17,"app-icon",9),t(18,"span",4),a(19,"Scheduled"),o()(),t(20,"div",5),a(21),o()(),t(22,"div",1)(23,"div",10),c(24,"app-icon",11),t(25,"span",4),a(26,"Subscribers"),o()(),t(27,"div",5),a(28),o()()()),r&2){let e=p();s(7),R(e.analytics.totalNewsletters),s(7),R(e.analytics.publishedNewsletters),s(7),R(e.analytics.scheduledNewsletters),s(7),R(e.analytics.totalSubscribers)}}var xe=class r{analytics;static \u0275fac=function(e){return new(e||r)};static \u0275cmp=v({type:r,selectors:[["app-newsletter-analytics"]],inputs:{analytics:"analytics"},decls:1,vars:1,consts:[[1,"grid","grid-cols-1","md:grid-cols-4","gap-4","mb-6"],[1,"bg-gray-800","rounded-lg","p-4","flex","flex-col"],[1,"flex","items-center","text-purple-400","mb-2"],["iconName","totalNewslettersIcon"],[1,"text-sm"],[1,"text-2xl","font-bold"],[1,"flex","items-center","text-blue-400","mb-2"],["iconName","publishedNewsletterIcon"],[1,"flex","items-center","text-yellow-400","mb-2"],["iconName","scheduledNewsletterIcon"],[1,"flex","items-center","text-green-400","mb-2"],["iconName","subscribersIcon"]],template:function(e,i){e&1&&f(0,xt,29,4,"div",0),e&2&&h(i.analytics?0:-1)},dependencies:[M,N],encapsulation:2})};var wt=(r,n)=>n.value;function vt(r,n){if(r&1){let e=b();t(0,"button",2),d("click",function(){let l=u(e).$implicit,m=p();return g(m.onFilterSelect(l.value))}),a(1),o()}if(r&2){let e=n.$implicit,i=p();We(i.getFilterClass(e.value)),s(),y(" ",e.label," ")}}var we=class r{selectedFilter=null;filterChange=new x;filters=[{value:null,label:"All"},{value:"draft",label:"Drafts"},{value:"scheduled",label:"Scheduled"},{value:"published",label:"Published"}];onFilterSelect(n){this.filterChange.emit(n)}getFilterClass(n){return this.selectedFilter===n?"bg-purple-600 text-white":"bg-gray-700 text-gray-300"}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=v({type:r,selectors:[["app-newsletter-filter"]],inputs:{selectedFilter:"selectedFilter"},outputs:{filterChange:"filterChange"},decls:3,vars:0,consts:[[1,"flex","items-center","space-x-2"],[1,"px-3","py-1","rounded-md","text-sm","font-medium","transition-colors",3,"class"],[1,"px-3","py-1","rounded-md","text-sm","font-medium","transition-colors",3,"click"]],template:function(e,i){e&1&&(t(0,"div",0),z(1,vt,2,3,"button",1,wt),o()),e&2&&(s(),A(i.filters))},encapsulation:2})};var ve=class r{createNewsletter=new x;onCreate(){this.createNewsletter.emit()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=v({type:r,selectors:[["app-newsletter-empty-state"]],outputs:{createNewsletter:"createNewsletter"},decls:7,vars:0,consts:[[1,"flex","flex-col","items-center","justify-center","h-40","text-gray-400"],["iconName","noNewsletterFoundIcon"],[1,"text-lg"],[1,"mt-4","text-purple-400","hover:text-purple-300","underline","flex","items-center",3,"click"],["iconName","createNewsletterIcon"]],template:function(e,i){e&1&&(t(0,"div",0),c(1,"app-icon",1),t(2,"p",2),a(3,"No newsletters found"),o(),t(4,"button",3),d("click",function(){return i.onCreate()}),c(5,"app-icon",4),a(6," Create your first newsletter "),o()())},dependencies:[N],encapsulation:2})};var ye=class r{status="";getStatusClass(){return{draft:"bg-gray-700 text-gray-300",scheduled:"bg-yellow-900/30 text-yellow-300",published:"bg-green-900/30 text-green-300"}[this.status]||"bg-gray-700 text-gray-300"}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=v({type:r,selectors:[["app-newsletter-status-badge"]],inputs:{status:"status"},decls:3,vars:4,consts:[[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium",3,"ngClass"]],template:function(e,i){e&1&&(t(0,"span",0),a(1),T(2,"titlecase"),o()),e&2&&(_("ngClass",i.getStatusClass()),s(),y(" ",E(2,2,i.status),`
`))},dependencies:[M,Je,Ke],encapsulation:2})};function yt(r,n){if(r&1&&c(0,"img",4),r&2){let e=p();_("src",e.newsletter.image,se)}}function St(r,n){r&1&&(t(0,"div",5),c(1,"app-icon",18),o())}var Se=class r{newsletter;select=new x;send=new x;delete=new x;onSelect(){this.select.emit(this.newsletter._id)}onSend(n){n.stopPropagation(),this.send.emit({id:this.newsletter._id,event:n})}onDelete(n){n.stopPropagation(),this.delete.emit({id:this.newsletter._id,event:n})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=v({type:r,selectors:[["app-newsletter-card"]],inputs:{newsletter:"newsletter"},outputs:{select:"select",send:"send",delete:"delete"},decls:24,vars:8,consts:[[1,"bg-gray-800","border","border-gray-700","rounded-lg","hover:border-purple-500","transition-colors","cursor-pointer","p-4",3,"click"],[1,"flex","justify-between","items-start"],[1,"flex","items-center"],[1,"flex-shrink-0","h-12","w-12","rounded-md","overflow-hidden","bg-gray-700","mr-4"],["alt","Newsletter cover",1,"h-full","w-full","object-cover",3,"src"],[1,"h-full","w-full","flex","items-center","justify-center","text-gray-500"],[1,"text-lg","font-medium"],[1,"text-sm","text-gray-400","mt-1","line-clamp-2"],[1,"flex","items-center","mt-2","space-x-4"],[1,"text-xs","text-gray-500"],[1,"flex","items-center","text-xs"],["iconName","newsletterRecipientCountIcon"],[3,"status"],[1,"flex","space-x-2"],[1,"text-gray-400","hover:text-blue-400","transition-colors",3,"click"],["iconName","newsletterPublishedStatusIcon"],[1,"text-gray-400","hover:text-red-400","transition-colors",3,"click"],["iconName","deleteConfirmationIcon"],["iconName","defaultImageNewsletter"]],template:function(e,i){e&1&&(t(0,"div",0),d("click",function(){return i.onSelect()}),t(1,"div",1)(2,"div",2)(3,"div",3),f(4,yt,1,1,"img",4)(5,St,2,0,"div",5),o(),t(6,"div")(7,"h3",6),a(8),o(),t(9,"p",7),a(10),o(),t(11,"div",8)(12,"span",9),a(13),T(14,"date"),o(),t(15,"span",10),c(16,"app-icon",11),a(17),o(),c(18,"app-newsletter-status-badge",12),o()()(),t(19,"div",13)(20,"button",14),d("click",function(m){return i.onSend(m)}),c(21,"app-icon",15),o(),t(22,"button",16),d("click",function(m){return i.onDelete(m)}),c(23,"app-icon",17),o()()()()),e&2&&(s(4),h(i.newsletter.image?4:5),s(4),R(i.newsletter.title),s(2),y(" ",i.newsletter.description," "),s(3),R(E(14,6,i.newsletter.createdAt)),s(4),y(" ",i.newsletter.recipientCount||0," "),s(),_("status",i.newsletter.status))},dependencies:[N,M,ue,ye],encapsulation:2})};var Me=class r{currentPage=1;totalPages=1;pageChange=new x;onPageChange(n){n>=1&&n<=this.totalPages&&this.pageChange.emit(n)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=v({type:r,selectors:[["app-newsletter-pagination"]],inputs:{currentPage:"currentPage",totalPages:"totalPages"},outputs:{pageChange:"pageChange"},decls:8,vars:8,consts:[[1,"flex","justify-center","mt-6"],[1,"flex","items-center"],[1,"px-3","py-1","rounded-md","bg-gray-700","text-gray-300","mx-1",3,"click","disabled"],["iconName","pageChangeIcon"],[1,"text-sm","text-gray-400","mx-2"],["iconName","openPageChange01Icon"]],template:function(e,i){e&1&&(t(0,"div",0)(1,"nav",1)(2,"button",2),d("click",function(){return i.onPageChange(i.currentPage-1)}),c(3,"app-icon",3),o(),t(4,"span",4),a(5),o(),t(6,"button",2),d("click",function(){return i.onPageChange(i.currentPage+1)}),c(7,"app-icon",5),o()()()),e&2&&(s(2),I("opacity-50",i.currentPage===1),_("disabled",i.currentPage===1),s(3),oe(" Page ",i.currentPage," of ",i.totalPages," "),s(),I("opacity-50",i.currentPage===i.totalPages),_("disabled",i.currentPage===i.totalPages))},dependencies:[N],encapsulation:2})};function Mt(r,n){r&1&&(t(0,"div",0),c(1,"div",4),o())}function Tt(r,n){r&1&&(t(0,"div",1)(1,"p"),a(2,"There was an error loading newsletters. Please try again later."),o()())}function Pt(r,n){if(r&1){let e=b();t(0,"app-newsletter-empty-state",5),d("createNewsletter",function(){u(e);let l=p();return g(l.onCreate())}),o()}}function Et(r,n){if(r&1){let e=b();t(0,"app-newsletter-card",7),d("select",function(l){u(e);let m=p(2);return g(m.onSelect(l))})("send",function(l){u(e);let m=p(2);return g(m.onSend(l))})("delete",function(l){u(e);let m=p(2);return g(m.onDelete(l))}),o()}if(r&2){let e=n.$implicit;_("newsletter",e)}}function Nt(r,n){if(r&1&&(t(0,"div",2),z(1,Et,1,1,"app-newsletter-card",6,U),o()),r&2){let e=p();s(),A(e.newsletters)}}function kt(r,n){if(r&1){let e=b();t(0,"app-newsletter-pagination",8),d("pageChange",function(l){u(e);let m=p();return g(m.onPageChange(l))}),o()}if(r&2){let e=p();_("currentPage",e.currentPage)("totalPages",e.pagination.pages)}}var Te=class r{newsletters=[];loading=!1;error=null;pagination=null;currentPage=1;select=new x;send=new x;delete=new x;create=new x;pageChange=new x;onSelect(n){this.select.emit(n)}onSend(n){this.send.emit(n)}onDelete(n){this.delete.emit(n)}onCreate(){this.create.emit()}onPageChange(n){this.pageChange.emit(n)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=v({type:r,selectors:[["app-newsletter-list"]],inputs:{newsletters:"newsletters",loading:"loading",error:"error",pagination:"pagination",currentPage:"currentPage"},outputs:{select:"select",send:"send",delete:"delete",create:"create",pageChange:"pageChange"},decls:5,vars:5,consts:[[1,"flex","justify-center","items-center","h-40"],[1,"bg-red-900/30","border","border-red-700","text-red-100","px-4","py-3","rounded","mb-4"],[1,"grid","grid-cols-1","gap-4"],[3,"currentPage","totalPages"],[1,"animate-spin","rounded-full","h-12","w-12","border-t-2","border-b-2","border-purple-500"],[3,"createNewsletter"],[3,"newsletter"],[3,"select","send","delete","newsletter"],[3,"pageChange","currentPage","totalPages"]],template:function(e,i){e&1&&f(0,Mt,2,0,"div",0)(1,Tt,3,0,"div",1)(2,Pt,1,0,"app-newsletter-empty-state")(3,Nt,3,0,"div",2)(4,kt,1,2,"app-newsletter-pagination",3),e&2&&(h(i.loading?0:-1),s(),h(i.error&&!i.loading?1:-1),s(),h(i.newsletters&&i.newsletters.length===0&&!i.loading&&!i.error?2:-1),s(),h(i.newsletters&&i.newsletters.length>0&&!i.loading?3:-1),s(),h(i.pagination&&i.pagination.pages>1?4:-1))},dependencies:[ve,Se,Me],encapsulation:2})};var It=["modalContent"],Rt=["modalBody"],Ot=[[["","header",""]],[["","body",""]],[["","footer",""]]],Vt=["[header]","[body]","[footer]"],B=class r{title="";primaryButtonText="Confirm";secondaryButtonText="Cancel";showFooter=!0;closeOnBackdropClick=!0;close=new x;primaryAction=new x;secondaryAction=new x;modalContent;modalBody;ngOnInit(){}ngAfterViewInit(){this.modalBody&&(this.modalBody.nativeElement.scrollTop=0)}onBackdropClick(n){this.closeOnBackdropClick&&this.modalContent&&!this.modalContent.nativeElement.contains(n.target)&&this.closeModal()}closeModal(){this.close.emit()}onPrimaryClick(){this.primaryAction.emit()}onSecondaryClick(){this.secondaryAction.emit()}stopPropagation(n){n.stopPropagation()}scrollToTop(){this.modalBody&&(this.modalBody.nativeElement.scrollTop=0)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=v({type:r,selectors:[["app-modal"]],viewQuery:function(e,i){if(e&1&&(te(It,5),te(Rt,5)),e&2){let l;ne(l=ie())&&(i.modalContent=l.first),ne(l=ie())&&(i.modalBody=l.first)}},inputs:{title:"title",primaryButtonText:"primaryButtonText",secondaryButtonText:"secondaryButtonText",showFooter:"showFooter",closeOnBackdropClick:"closeOnBackdropClick"},outputs:{close:"close",primaryAction:"primaryAction",secondaryAction:"secondaryAction"},ngContentSelectors:Vt,decls:15,vars:0,consts:[["modalContent",""],["modalBody",""],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","overflow-auto","bg-gray-900","bg-opacity-90",3,"click"],[1,"bg-gray-800","rounded-lg","shadow-xl","transform","transition-all","w-full","mx-10","md:mx-20","max-h-[90vh]","flex","flex-col",3,"click"],[1,"border-b","border-gray-700","px-4","py-3","flex","items-center","justify-between"],["type","button",1,"text-gray-400","hover:text-gray-300",3,"click"],[1,"sr-only"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-4","overflow-auto","flex-grow"],[1,"bg-gray-800","px-4","py-3","flex","flex-row-reverse","gap-2","border-t","border-gray-700"]],template:function(e,i){if(e&1){let l=b();qe(Ot),t(0,"div",2),d("click",function(O){return u(l),g(i.onBackdropClick(O))}),t(1,"div",3,0),d("click",function(O){return u(l),g(i.stopPropagation(O))}),t(3,"div",4),ce(4),t(5,"button",5),d("click",function(){return u(l),g(i.closeModal())}),t(6,"span",6),a(7,"Close"),o(),C(),t(8,"svg",7),c(9,"path",8),o()()(),S(),t(10,"div",9,1),ce(12,1),o(),t(13,"div",10),ce(14,2),o()()()}},dependencies:[M],encapsulation:2})};var Ft=["editorContainer"];function Lt(r,n){if(r&1&&(t(0,"option",41),a(1),o()),r&2){let e=n.$implicit;_("value",e.value),s(),y(" ",e.label," ")}}function Dt(r,n){r&1&&(C(),t(0,"svg",8),c(1,"path",42),t(2,"text",43),a(3,"LTR"),o()())}function zt(r,n){r&1&&(C(),t(0,"svg",8),c(1,"path",44),t(2,"text",45),a(3,"RTL"),o()())}function At(r,n){if(r&1){let e=b();t(0,"div",46,0),d("input",function(){u(e);let l=p();return g(l.onContentChange())}),o()}if(r&2){let e=p();Oe("direction",e.textDirection),Re("dir",e.textDirection)}}function Ht(r,n){if(r&1){let e=b();t(0,"textarea",47),q("ngModelChange",function(l){u(e);let m=p();return W(m.content,l)||(m.content=l),g(l)}),d("input",function(){u(e);let l=p();return g(l.updateContent())}),o()}if(r&2){let e=p();Oe("direction",e.textDirection),G("ngModel",e.content),Re("dir",e.textDirection)}}var Pe=class r{initialContent="";contentChange=new x;editorElement;content="";isShowingHtml=!1;isRTL=!1;textDirection="ltr";selectedHeading="p";headingOptions=[{value:"p",label:"Paragraph"},{value:"h1",label:"Heading 1"},{value:"h2",label:"Heading 2"},{value:"h3",label:"Heading 3"},{value:"h4",label:"Heading 4"}];ngOnInit(){this.content=this.initialContent,this.initialContent&&this.containsArabic(this.initialContent)&&(this.isRTL=!0,this.textDirection="rtl")}ngAfterViewInit(){this.editorElement&&(this.editorElement.nativeElement.innerHTML=this.content,this.updateDirectionAttributes(),setTimeout(()=>{this.editorElement.nativeElement.focus()},0))}toggleDirection(){this.isRTL=!this.isRTL,this.textDirection=this.isRTL?"rtl":"ltr",this.updateDirectionAttributes(),this.updateContent()}updateDirectionAttributes(){this.editorElement&&(this.editorElement.nativeElement.style.direction=this.textDirection,this.editorElement.nativeElement.dir=this.textDirection)}containsArabic(n){return n?/[\u0600-\u06FF]/.test(n):!1}executeCommand(n){if(n==="createLink"){let e=prompt("Enter the URL:");e&&document.execCommand(n,!1,e)}else if(n==="insertImage"){let e=prompt("Enter the image URL:");e&&document.execCommand(n,!1,e)}else document.execCommand(n,!1);this.updateContent(),this.editorElement&&this.editorElement.nativeElement.focus()}formatHeading(n){let e=n.target;this.selectedHeading=e.value,document.execCommand("formatBlock",!1,this.selectedHeading),this.updateContent(),this.editorElement&&this.editorElement.nativeElement.focus()}toggleHtmlView(){this.isShowingHtml=!this.isShowingHtml,this.isShowingHtml?this.content=this.editorElement.nativeElement.innerHTML:(this.editorElement.nativeElement.innerHTML=this.content,setTimeout(()=>{this.editorElement&&this.editorElement.nativeElement.focus()},0))}onContentChange(){!this.isRTL&&this.editorElement&&this.containsArabic(this.editorElement.nativeElement.innerText)&&(this.isRTL=!0,this.textDirection="rtl",this.updateDirectionAttributes()),this.updateContent()}updateContent(){this.isShowingHtml?this.contentChange.emit(this.content):this.editorElement&&(this.content=this.editorElement.nativeElement.innerHTML,this.contentChange.emit(this.content))}getWordCount(){if(!this.content)return 0;let n=this.stripHtml(this.content).trim();return n?n.split(/\s+/).length:0}getCharacterCount(){return this.content?this.stripHtml(this.content).length:0}stripHtml(n){let e=document.createElement("div");return e.innerHTML=n,e.textContent||e.innerText||""}onSelectionChange(n){if(!this.isShowingHtml&&this.editorElement){let e=window.getSelection();if(e&&e.rangeCount>0){let i=e.getRangeAt(0).startContainer.parentElement;if(i){let l=this.findParentBlockElement(i);l&&this.headingOptions.some(m=>m.value===l.toLowerCase())&&(this.selectedHeading=l.toLowerCase())}}}}findParentBlockElement(n){let e=["P","H1","H2","H3","H4","H5","H6","DIV"],i=n;for(;i&&i!==this.editorElement.nativeElement;){if(e.includes(i.tagName))return i.tagName;if(i.parentElement)i=i.parentElement;else break}return"p"}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=v({type:r,selectors:[["app-editor"]],viewQuery:function(e,i){if(e&1&&te(Ft,5),e&2){let l;ne(l=ie())&&(i.editorElement=l.first)}},hostBindings:function(e,i){e&1&&d("selectionchange",function(m){return i.onSelectionChange(m)},!1,Ge)},inputs:{initialContent:"initialContent"},outputs:{contentChange:"contentChange"},decls:60,vars:9,consts:[["editorContainer",""],[1,"editor-container"],[1,"editor-header"],[1,"editor-controls"],[1,"format-select",3,"change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"divider"],["type","button","title","Bold",1,"toolbar-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 16 16"],["d","M8.21 13c2.106 0 3.412-1.087 3.412-2.823 0-1.306-.984-2.283-2.324-2.386v-.055a2.176 2.176 0 0 0 1.852-2.14c0-1.51-1.162-2.46-3.014-2.46H3.843V13H8.21zM5.908 4.674h1.696c.963 0 1.517.451 1.517 1.244 0 .834-.629 1.32-1.73 1.32H5.908V4.673zm0 6.788V8.598h1.73c1.217 0 1.88.492 1.88 1.415 0 .943-.643 1.449-1.832 1.449H5.907z"],["type","button","title","Italic",1,"toolbar-btn",3,"click"],["d","M7.991 11.674 9.53 4.455c.123-.595.246-.71 1.347-.807l.11-.52H7.211l-.11.52c1.06.096 1.128.212 1.005.807L6.57 11.674c-.123.595-.246.71-1.346.806l-.11.52h3.774l.11-.52c-1.06-.095-1.129-.211-1.006-.806z"],["type","button","title","Underline",1,"toolbar-btn",3,"click"],["d","M5.313 3.136h-1.23V9.54c0 2.105 1.47 3.623 3.917 3.623s3.917-1.518 3.917-3.623V3.136h-1.23v6.323c0 1.49-.978 2.57-2.687 2.57-1.709 0-2.687-1.08-2.687-2.57V3.136zM12.5 15h-9v-1h9v1z"],["type","button","title","Strikethrough",1,"toolbar-btn",3,"click"],["d","M6.333 5.686c0 .31.083.581.27.814H5.166a2.776 2.776 0 0 1-.099-.76c0-1.627 1.436-2.768 3.48-2.768 1.969 0 3.39 1.175 3.445 2.85h-1.23c-.11-1.08-.964-1.743-2.25-1.743-1.23 0-2.18.602-2.18 1.607zm2.194 7.478c-2.153 0-3.589-1.107-3.705-2.81h1.23c.144 1.06 1.129 1.703 2.544 1.703 1.34 0 2.31-.705 2.31-1.675 0-.827-.547-1.374-1.914-1.675L8.046 8.5H1v-1h14v1h-3.504c.468.437.675.994.675 1.697 0 1.826-1.436 2.967-3.644 2.967z"],["type","button","title","Bullet List",1,"toolbar-btn",3,"click"],["fill-rule","evenodd","d","M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"],["type","button","title","Numbered List",1,"toolbar-btn",3,"click"],["fill-rule","evenodd","d","M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5z"],["d","M1.713 11.865v-.474H2c.217 0 .363-.137.363-.317 0-.185-.158-.31-.361-.31-.223 0-.367.152-.373.31h-.59c.016-.467.373-.787.986-.787.588-.002.954.291.957.703a.595.595 0 0 1-.492.594v.033a.615.615 0 0 1 .569.631c.003.533-.502.8-1.051.8-.656 0-1-.37-1.008-.794h.582c.008.178.186.306.422.309.254 0 .424-.145.422-.35-.002-.195-.155-.348-.414-.348h-.3zm-.004-4.699h-.604v-.035c0-.408.295-.844.958-.844.583 0 .96.326.96.756 0 .389-.257.617-.476.848l-.537.572v.03h1.054V9H1.143v-.395l.957-.99c.138-.142.293-.304.293-.508 0-.18-.147-.32-.342-.32a.33.33 0 0 0-.342.338v.041zM2.564 5h-.635V2.924h-.031l-.598.42v-.567l.629-.443h.635V5z"],["type","button","title","Align Left",1,"toolbar-btn",3,"click"],["fill-rule","evenodd","d","M2 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"],["type","button","title","Align Center",1,"toolbar-btn",3,"click"],["fill-rule","evenodd","d","M4 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"],["type","button","title","Align Right",1,"toolbar-btn",3,"click"],["fill-rule","evenodd","d","M6 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-4-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm4-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-4-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"],["type","button","title","Insert Link",1,"toolbar-btn",3,"click"],["d","M6.354 5.5H4a3 3 0 0 0 0 6h3a3 3 0 0 0 2.83-4H9c-.086 0-.17.01-.25.031A2 2 0 0 1 7 10.5H4a2 2 0 1 1 0-4h1.535c.218-.376.495-.714.82-1z"],["d","M9 5.5a3 3 0 0 0-2.83 4h1.098A2 2 0 0 1 9 6.5h3a2 2 0 1 1 0 4h-1.535a4.02 4.02 0 0 1-.82 1H12a3 3 0 1 0 0-6H9z"],["type","button","title","Insert Image",1,"toolbar-btn",3,"click"],["d","M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"],["d","M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1h12z"],["type","button","title","Toggle Direction (LTR/RTL)",1,"toolbar-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 16 16",4,"ngIf"],["type","button",1,"html-toggle-btn",3,"click"],[1,"editor-content-wrapper"],["class","editor-content","contenteditable","true","placeholder","Type something...",3,"direction","input",4,"ngIf"],["class","html-editor",3,"ngModel","direction","ngModelChange","input",4,"ngIf"],[1,"editor-footer"],[1,"word-counter"],[3,"value"],["fill-rule","evenodd","d","M1.5 1H14a.5.5 0 0 1 0 1H1.5a.5.5 0 0 1 0-1zM3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM1 7a.5.5 0 0 1 .5-.5h12a.5.5 0 0 1 0 1H1.5A.5.5 0 0 1 1 7zm0 4a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1H1.5a.5.5 0 0 1-.5-.5z"],["x","14","y","14","font-size","8","font-weight","bold"],["fill-rule","evenodd","d","M14.5 1H2a.5.5 0 0 0 0 1h12.5a.5.5 0 0 0 0-1zM13 3.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0 0 1h9a.5.5 0 0 0 .5-.5zM15 7a.5.5 0 0 0-.5-.5h-12a.5.5 0 0 0 0 1h12a.5.5 0 0 0 .5-.5zm0 4a.5.5 0 0 0-.5-.5h-11a.5.5 0 0 0 0 1h11a.5.5 0 0 0 .5-.5z"],["x","2","y","14","font-size","8","font-weight","bold"],["contenteditable","true","placeholder","Type something...",1,"editor-content",3,"input"],[1,"html-editor",3,"ngModelChange","input","ngModel"]],template:function(e,i){e&1&&(t(0,"div",1)(1,"div",2)(2,"div",3)(3,"select",4),d("change",function(m){return i.formatHeading(m)}),f(4,Lt,2,2,"option",5),o(),c(5,"div",6),t(6,"button",7),d("click",function(){return i.executeCommand("bold")}),C(),t(7,"svg",8),c(8,"path",9),o()(),S(),t(9,"button",10),d("click",function(){return i.executeCommand("italic")}),C(),t(10,"svg",8),c(11,"path",11),o()(),S(),t(12,"button",12),d("click",function(){return i.executeCommand("underline")}),C(),t(13,"svg",8),c(14,"path",13),o()(),S(),t(15,"button",14),d("click",function(){return i.executeCommand("strikeThrough")}),C(),t(16,"svg",8),c(17,"path",15),o()(),S(),c(18,"div",6),t(19,"button",16),d("click",function(){return i.executeCommand("insertUnorderedList")}),C(),t(20,"svg",8),c(21,"path",17),o()(),S(),t(22,"button",18),d("click",function(){return i.executeCommand("insertOrderedList")}),C(),t(23,"svg",8),c(24,"path",19)(25,"path",20),o()(),S(),c(26,"div",6),t(27,"button",21),d("click",function(){return i.executeCommand("justifyLeft")}),C(),t(28,"svg",8),c(29,"path",22),o()(),S(),t(30,"button",23),d("click",function(){return i.executeCommand("justifyCenter")}),C(),t(31,"svg",8),c(32,"path",24),o()(),S(),t(33,"button",25),d("click",function(){return i.executeCommand("justifyRight")}),C(),t(34,"svg",8),c(35,"path",26),o()(),S(),c(36,"div",6),t(37,"button",27),d("click",function(){return i.executeCommand("createLink")}),C(),t(38,"svg",8),c(39,"path",28)(40,"path",29),o()(),S(),t(41,"button",30),d("click",function(){return i.executeCommand("insertImage")}),C(),t(42,"svg",8),c(43,"path",31)(44,"path",32),o()(),S(),c(45,"div",6),t(46,"button",33),d("click",function(){return i.toggleDirection()}),f(47,Dt,4,0,"svg",34)(48,zt,4,0,"svg",34),o()(),t(49,"button",35),d("click",function(){return i.toggleHtmlView()}),a(50),o()(),t(51,"div",36),f(52,At,2,3,"div",37)(53,Ht,1,4,"textarea",38),o(),t(54,"div",39)(55,"div",40)(56,"span"),a(57),o(),t(58,"span"),a(59),o()()()()),e&2&&(s(3),_("ngModel",i.selectedHeading),s(),_("ngForOf",i.headingOptions),s(43),_("ngIf",!i.isRTL),s(),_("ngIf",i.isRTL),s(2),y(" ",i.isShowingHtml?"Visual":"HTML"," "),s(2),_("ngIf",!i.isShowingHtml),s(),_("ngIf",i.isShowingHtml),s(4),y("Words: ",i.getWordCount(),""),s(2),y("Characters: ",i.getCharacterCount(),""))},dependencies:[M,Ye,pe,H,K,X,Q,Y,J,_e],styles:[".editor-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#1a202e;border-radius:8px;overflow:hidden;box-shadow:0 4px 20px #00000040;height:100%;min-height:400px;color:#e6eaf0;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,sans-serif}.editor-container[_ngcontent-%COMP%]   .editor-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:linear-gradient(to right,#12161f,#1a202e);border-bottom:1px solid #2a3446}.editor-container[_ngcontent-%COMP%]   .editor-header[_ngcontent-%COMP%]   .editor-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;flex-wrap:wrap}.editor-container[_ngcontent-%COMP%]   .editor-header[_ngcontent-%COMP%]   .editor-controls[_ngcontent-%COMP%]   .format-select[_ngcontent-%COMP%]{background-color:#242c3d;color:#e6eaf0;border:1px solid #2a3446;border-radius:4px;padding:6px 10px;font-size:14px;height:34px;cursor:pointer;outline:none;transition:all .2s ease}.editor-container[_ngcontent-%COMP%]   .editor-header[_ngcontent-%COMP%]   .editor-controls[_ngcontent-%COMP%]   .format-select[_ngcontent-%COMP%]:hover, .editor-container[_ngcontent-%COMP%]   .editor-header[_ngcontent-%COMP%]   .editor-controls[_ngcontent-%COMP%]   .format-select[_ngcontent-%COMP%]:focus{border-color:#4a7bff;box-shadow:0 0 0 1px #4a7bff4d}.editor-container[_ngcontent-%COMP%]   .editor-header[_ngcontent-%COMP%]   .editor-controls[_ngcontent-%COMP%]   .format-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#12161f;color:#e6eaf0}.editor-container[_ngcontent-%COMP%]   .editor-header[_ngcontent-%COMP%]   .editor-controls[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{width:1px;height:24px;background-color:#2a3446;margin:0 8px}.editor-container[_ngcontent-%COMP%]   .editor-header[_ngcontent-%COMP%]   .editor-controls[_ngcontent-%COMP%]   .toolbar-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:34px;height:34px;border-radius:4px;background:transparent;border:none;cursor:pointer;transition:all .2s ease;color:#e6eaf0}.editor-container[_ngcontent-%COMP%]   .editor-header[_ngcontent-%COMP%]   .editor-controls[_ngcontent-%COMP%]   .toolbar-btn[_ngcontent-%COMP%]:hover{background-color:#2a3446}.editor-container[_ngcontent-%COMP%]   .editor-header[_ngcontent-%COMP%]   .editor-controls[_ngcontent-%COMP%]   .toolbar-btn[_ngcontent-%COMP%]:active{transform:translateY(1px)}.editor-container[_ngcontent-%COMP%]   .editor-header[_ngcontent-%COMP%]   .editor-controls[_ngcontent-%COMP%]   .toolbar-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:currentColor;width:16px;height:16px}.editor-container[_ngcontent-%COMP%]   .editor-header[_ngcontent-%COMP%]   .html-toggle-btn[_ngcontent-%COMP%]{background-color:#242c3d;color:#e6eaf0;border:1px solid #2a3446;border-radius:4px;padding:6px 12px;font-size:13px;height:34px;cursor:pointer;transition:all .2s ease}.editor-container[_ngcontent-%COMP%]   .editor-header[_ngcontent-%COMP%]   .html-toggle-btn[_ngcontent-%COMP%]:hover{background-color:#2a3446;border-color:#4a7bff}.editor-container[_ngcontent-%COMP%]   .editor-header[_ngcontent-%COMP%]   .html-toggle-btn[_ngcontent-%COMP%]:active{transform:translateY(1px)}.editor-container[_ngcontent-%COMP%]   .editor-content-wrapper[_ngcontent-%COMP%]{flex:1;position:relative;overflow:auto;background-color:#12161f}.editor-container[_ngcontent-%COMP%]   .editor-content-wrapper[_ngcontent-%COMP%]   .editor-content[_ngcontent-%COMP%], .editor-container[_ngcontent-%COMP%]   .editor-content-wrapper[_ngcontent-%COMP%]   .html-editor[_ngcontent-%COMP%]{min-height:100%;padding:16px;outline:none;color:#e6eaf0;font-size:15px;line-height:1.6;width:100%;height:100%;box-sizing:border-box}.editor-container[_ngcontent-%COMP%]   .editor-content-wrapper[_ngcontent-%COMP%]   .editor-content[_ngcontent-%COMP%]:focus, .editor-container[_ngcontent-%COMP%]   .editor-content-wrapper[_ngcontent-%COMP%]   .html-editor[_ngcontent-%COMP%]:focus{outline:none}.editor-container[_ngcontent-%COMP%]   .editor-content-wrapper[_ngcontent-%COMP%]   .editor-content[placeholder][_ngcontent-%COMP%]:empty:before, .editor-container[_ngcontent-%COMP%]   .editor-content-wrapper[_ngcontent-%COMP%]   .html-editor[placeholder][_ngcontent-%COMP%]:empty:before{content:attr(placeholder);color:#9ba3b2;font-style:italic}.editor-container[_ngcontent-%COMP%]   .editor-content-wrapper[_ngcontent-%COMP%]   .html-editor[_ngcontent-%COMP%]{background-color:#12161f;resize:none;border:none;font-family:Fira Code,Consolas,monospace}.editor-container[_ngcontent-%COMP%]   .editor-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:8px 16px;background-color:#12161f;border-top:1px solid #2a3446;font-size:12px;color:#9ba3b2}.editor-container[_ngcontent-%COMP%]   .editor-footer[_ngcontent-%COMP%]   .word-counter[_ngcontent-%COMP%]{display:flex;gap:16px}[dir=rtl][_ngcontent-%COMP%]   .editor-content[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .html-editor[_ngcontent-%COMP%]{text-align:right}.editor-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .editor-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .editor-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .editor-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .editor-content[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .editor-content[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-top:.8em;margin-bottom:.5em;font-weight:600}.editor-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8em}.editor-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5em}.editor-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3em}.editor-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.2em}.editor-content[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.1em}.editor-content[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:1em}.editor-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1em}.editor-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .editor-content[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin-left:1.5em;margin-bottom:1em}.editor-content[_ngcontent-%COMP%]   blockquote[_ngcontent-%COMP%]{border-left:3px solid #4a7bff;padding-left:1em;margin-left:0;color:#9ba3b2}.editor-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#4a7bff;text-decoration:none}.editor-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.editor-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto;border-radius:4px}.editor-content[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{font-family:Fira Code,Consolas,monospace;background-color:#242c3d80;padding:2px 4px;border-radius:3px;font-size:.9em}.editor-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%;margin-bottom:1em}.editor-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .editor-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #2a3446;padding:8px 12px}.editor-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#242c3d}.formatting-active[_ngcontent-%COMP%]{background-color:#4a7bff33!important;color:#4a7bff!important}@media (max-width: 768px){.editor-header[_ngcontent-%COMP%]   .editor-controls[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{margin:0 4px}.editor-header[_ngcontent-%COMP%]   .editor-controls[_ngcontent-%COMP%]   .toolbar-btn[_ngcontent-%COMP%]{width:30px;height:30px}}@media (max-width: 576px){.editor-header[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.editor-header[_ngcontent-%COMP%]   .editor-controls[_ngcontent-%COMP%]{width:100%;justify-content:center}.editor-header[_ngcontent-%COMP%]   .html-toggle-btn[_ngcontent-%COMP%]{width:100%}}"]})};function Bt(r,n){r&1&&(t(0,"div",18),c(1,"app-icon",50),a(2," Title is required and must be less than 100 characters "),o())}function $t(r,n){r&1&&(t(0,"div",18),c(1,"app-icon",50),a(2," Description is required and must be less than 500 characters "),o())}function jt(r,n){if(r&1&&(t(0,"option",26),a(1),o()),r&2){let e=n.$implicit;_("value",e.value),s(),y(" ",e.label," ")}}function Ut(r,n){if(r&1){let e=b();t(0,"div",51),d("click",function(){u(e),p();let l=Ve(69);return g(l.click())}),c(1,"div",52)(2,"app-icon",53),t(3,"p",54),a(4," Click to upload an image "),o(),t(5,"p",55),a(6," Recommended size: 300x300 pixels "),o(),t(7,"p",56),a(8," Supports JPG, PNG and GIF formats "),o()()}}function Gt(r,n){if(r&1){let e=b();t(0,"div",40),c(1,"img",57)(2,"div",58),t(3,"button",59),d("click",function(){u(e);let l=p(2);return g(l.removeImage())}),c(4,"app-icon",60),o(),t(5,"button",61),d("click",function(){u(e),p();let l=Ve(69);return g(l.click())}),c(6,"app-icon",62),o()()}if(r&2){let e=p(2);s(),_("src",e.imagePreview,se)}}function Wt(r,n){r&1&&(t(0,"div",44),a(1,"Content is required"),o())}function qt(r,n){r&1&&(t(0,"span",49),c(1,"app-icon",63),o())}function Qt(r,n){if(r&1){let e=b();t(0,"app-modal",1),d("close",function(){u(e);let l=p();return g(l.onClose())}),V(1,2),t(2,"h2",3),a(3,"Create Newsletter"),o(),F(),V(4,4),t(5,"div",5)(6,"form",6),d("ngSubmit",function(){u(e);let l=p();return g(l.onSubmit())}),t(7,"div",7)(8,"div",8)(9,"div",9)(10,"span",10),a(11,"Basic Info"),o(),t(12,"span",11),a(13,"Content"),o(),t(14,"span",11),a(15,"Preview"),o()(),t(16,"div",12),c(17,"div",13),o()()(),t(18,"div",14)(19,"div",15)(20,"div",8),c(21,"input",16),t(22,"label",17),a(23,"Newsletter Title*"),o(),f(24,Bt,3,0,"div",18),o(),t(25,"div",8),c(26,"textarea",19),t(27,"label",20),a(28,"Newsletter Description*"),o(),f(29,$t,3,0,"div",18),t(30,"div",21),C(),t(31,"svg",22),c(32,"path",23),o(),a(33," A compelling description will increase your newsletter's reach "),o()(),S(),t(34,"div",8)(35,"label",24),a(36,"Publish Frequency*"),o(),t(37,"div",8)(38,"select",25),z(39,jt,2,2,"option",26,U),o(),t(41,"div",27),c(42,"app-icon",28),o()()(),t(43,"div",8)(44,"label",29),a(45,"Status"),o(),t(46,"div",30)(47,"label",31),c(48,"input",32)(49,"app-icon",33),t(50,"span",34),a(51,"Draft"),o()(),t(52,"label",31),c(53,"input",35)(54,"app-icon",36),t(55,"span",34),a(56,"Scheduled"),o()(),t(57,"label",31),c(58,"input",37)(59,"app-icon",38),t(60,"span",34),a(61,"Published"),o()()()()(),t(62,"div",15)(63,"div",8)(64,"label",29),a(65,"Newsletter Image"),o(),f(66,Ut,9,0,"div",39)(67,Gt,7,1,"div",40),t(68,"input",41,0),d("change",function(l){u(e);let m=p();return g(m.onImageChange(l))}),o()()()(),t(70,"div")(71,"label",42),a(72,"Newsletter Content*"),o(),t(73,"app-editor",43),d("contentChange",function(l){u(e);let m=p();return g(m.onEditorContentChange(l))}),o(),f(74,Wt,2,0,"div",44),o()()(),F(),V(75,45),t(76,"div",46)(77,"button",47),d("click",function(){u(e);let l=p();return g(l.onClose())}),a(78," Cancel "),o(),t(79,"button",48),d("click",function(){u(e);let l=p();return g(l.onSubmit())}),f(80,qt,2,0,"span",49),a(81," Save Newsletter "),o()(),F(),o()}if(r&2){let e,i,l,m,O,re,Le,De,ze,Ae,He,Be,$e,je,le,w=p();s(6),_("formGroup",w.newsletterForm),s(18),h((e=w.newsletterForm.get("title"))!=null&&e.invalid&&((e=w.newsletterForm.get("title"))!=null&&e.touched)?24:-1),s(5),h((i=w.newsletterForm.get("description"))!=null&&i.invalid&&((i=w.newsletterForm.get("description"))!=null&&i.touched)?29:-1),s(10),A(w.publishFrequencyOptions),s(8),I("bg-gradient-to-r",((l=w.newsletterForm.get("status"))==null?null:l.value)==="draft")("from-purple-600",((m=w.newsletterForm.get("status"))==null?null:m.value)==="draft")("to-purple-700",((O=w.newsletterForm.get("status"))==null?null:O.value)==="draft")("shadow-lg",((re=w.newsletterForm.get("status"))==null?null:re.value)==="draft"),s(5),I("bg-gradient-to-r",((Le=w.newsletterForm.get("status"))==null?null:Le.value)==="scheduled")("from-blue-600",((De=w.newsletterForm.get("status"))==null?null:De.value)==="scheduled")("to-blue-700",((ze=w.newsletterForm.get("status"))==null?null:ze.value)==="scheduled")("shadow-lg",((Ae=w.newsletterForm.get("status"))==null?null:Ae.value)==="scheduled"),s(5),I("bg-gradient-to-r",((He=w.newsletterForm.get("status"))==null?null:He.value)==="published")("from-green-600",((Be=w.newsletterForm.get("status"))==null?null:Be.value)==="published")("to-green-700",(($e=w.newsletterForm.get("status"))==null?null:$e.value)==="published")("shadow-lg",((je=w.newsletterForm.get("status"))==null?null:je.value)==="published"),s(9),_("ngIf",!w.imagePreview),s(),h(w.imagePreview?67:-1),s(6),_("initialContent",w.newsletterForm.value.content),s(),h((le=w.newsletterForm.get("content"))!=null&&le.invalid&&((le=w.newsletterForm.get("content"))!=null&&le.touched)?74:-1),s(5),I("opacity-50",w.newsletterForm.invalid||w.isLoading),_("disabled",w.newsletterForm.invalid||w.isLoading),s(),h(w.isLoading?80:-1)}}var Ee=class r{isVisible=!1;isLoading=!1;close=new x;submit=new x;fb=j(ot);newsletterForm;imageFile=null;imagePreview=null;publishFrequencyOptions=[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"biweekly",label:"Bi-weekly"},{value:"monthly",label:"Monthly"},{value:"quarterly",label:"Quarterly"}];ngOnInit(){this.initForm()}initForm(){this.newsletterForm=this.fb.group({title:["",[$.required,$.maxLength(100)]],description:["",[$.required,$.maxLength(500)]],publishFrequency:["weekly",$.required],content:["",$.required],status:["draft"]})}onClose(){this.resetForm(),this.close.emit()}onSubmit(){if(this.newsletterForm.valid){let n={title:this.newsletterForm.value.title,description:this.newsletterForm.value.description,publishFrequency:this.newsletterForm.value.publishFrequency,content:this.newsletterForm.value.content,status:this.newsletterForm.value.status,image:this.imagePreview};this.submit.emit(n)}else this.markFormGroupTouched()}onImageChange(n){let e=n.target;if(e.files&&e.files.length>0){this.imageFile=e.files[0];let i=new FileReader;i.onload=()=>{this.imagePreview=i.result},i.readAsDataURL(this.imageFile)}}removeImage(){this.imageFile=null,this.imagePreview=null}onEditorContentChange(n){this.newsletterForm.patchValue({content:n})}resetForm(){this.newsletterForm.reset({title:"",description:"",publishFrequency:"weekly",content:"",status:"draft"}),this.imagePreview=null,this.imageFile=null}markFormGroupTouched(){Object.keys(this.newsletterForm.controls).forEach(n=>{this.newsletterForm.get(n)?.markAsTouched()})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=v({type:r,selectors:[["app-newsletter-creation-modal"]],inputs:{isVisible:"isVisible",isLoading:"isLoading"},outputs:{close:"close",submit:"submit"},decls:1,vars:1,consts:[["fileInput",""],[3,"close"],["header",""],[1,"text-xl","font-semibold"],["body",""],[1,"space-y-6"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"mb-8"],[1,"relative"],[1,"flex","justify-between","mb-2"],[1,"text-xs","font-medium","text-purple-400"],[1,"text-xs","font-medium","text-gray-400"],[1,"overflow-hidden","h-2","flex","rounded-full","bg-gray-700"],[1,"bg-gradient-to-r","from-purple-500","to-indigo-600","w-1/3","rounded-full","shadow-lg","transition-all","duration-500","ease-in-out"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-8"],[1,"space-y-6","backdrop-blur-sm","bg-gray-800/40","rounded-xl","p-6","border","border-gray-700/50","shadow-xl"],["id","title","formControlName","title","type","text","placeholder"," ",1,"peer","w-full","px-4","py-3","bg-gray-800/70","border","border-gray-600","rounded-lg","text-white","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-transparent","transition-all","duration-300"],["for","title",1,"absolute","left-4","-top-3","text-xs","font-medium","text-purple-400","bg-gray-800","px-2","transition-all","duration-300"],[1,"text-red-400","text-xs","mt-1","flex","items-center"],["id","description","formControlName","description","rows","4","placeholder"," ",1,"peer","w-full","px-4","py-3","bg-gray-800/70","border","border-gray-600","rounded-lg","text-white","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-transparent","transition-all","duration-300","resize-none"],["for","description",1,"absolute","left-4","-top-3","text-xs","font-medium","text-purple-400","bg-gray-800","px-2","transition-all","duration-300"],[1,"text-xs","text-gray-400","mt-1","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-3","w-3","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],["for","publishFrequency",1,"absolute","left-4","-top-3","text-xs","font-medium","text-purple-400","bg-gray-800","px-2","z-10"],["id","publishFrequency","formControlName","publishFrequency",1,"appearance-none","w-full","px-4","py-3","bg-gray-800/70","border","border-gray-600","rounded-lg","text-white","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-transparent","transition-all","duration-300"],[3,"value"],[1,"pointer-events-none","absolute","inset-y-0","right-0","flex","items-center","px-2","text-purple-400"],["iconName","dropdownArrowIcon"],[1,"absolute","left-4","-top-3","text-xs","font-medium","text-purple-400","bg-gray-800","px-2","z-10"],[1,"flex","p-1","space-x-1","bg-gray-800/80","rounded-lg","border","border-gray-700/50","shadow-inner"],[1,"flex-1","flex","items-center","justify-center","py-2","px-3","rounded-md","cursor-pointer","transition-all","duration-300"],["type","radio","formControlName","status","value","draft",1,"sr-only"],["iconName","draftIcon"],[1,"text-sm"],["type","radio","formControlName","status","value","scheduled",1,"sr-only"],["iconName","scheduledIcon"],["type","radio","formControlName","status","value","published",1,"sr-only"],["iconName","publishedIcon"],["class","border-2 border-dashed border-gray-600 rounded-lg p-8 text-center cursor-pointer hover:border-purple-500 transition-all duration-300 group relative overflow-hidden",3,"click",4,"ngIf"],[1,"relative","rounded-lg","overflow-hidden","shadow-2xl","group"],["type","file","accept","image/*",1,"hidden",3,"change"],["for","content",1,"block","text-sm","font-medium","text-gray-300","mb-1"],[3,"contentChange","initialContent"],[1,"text-red-400","text-sm","mt-1"],["footer",""],[1,"flex","justify-end","space-x-3"],["type","button",1,"px-4","py-2","bg-gray-700","hover:bg-gray-600","text-white","rounded-md","text-sm","font-medium","transition-colors",3,"click"],["type","button",1,"px-4","py-2","bg-purple-600","hover:bg-purple-700","text-white","rounded-md","text-sm","font-medium","transition-colors","flex","items-center",3,"click","disabled"],[1,"mr-2"],["iconName","warningTitleIcon"],[1,"border-2","border-dashed","border-gray-600","rounded-lg","p-8","text-center","cursor-pointer","hover:border-purple-500","transition-all","duration-300","group","relative","overflow-hidden",3,"click"],[1,"absolute","inset-0","bg-gradient-to-br","from-purple-500/10","to-indigo-500/10","transform","scale-0","group-hover:scale-100","transition-transform","duration-500","rounded-lg"],["iconName","imagePreviewIcon"],[1,"mt-4","text-sm","text-gray-300","group-hover:text-white","transition-colors","duration-300"],[1,"text-xs","text-gray-500","mt-1","group-hover:text-gray-300","transition-colors","duration-300"],[1,"text-xs","text-purple-400/70","mt-3","group-hover:text-purple-400","transition-colors","duration-300"],["alt","Preview",1,"w-full","h-64","object-cover","transition-transform","duration-500","group-hover:scale-105",3,"src"],[1,"absolute","inset-0","bg-gradient-to-t","from-gray-900/80","to-transparent","opacity-0","group-hover:opacity-100","transition-opacity","duration-300"],["type","button",1,"absolute","bottom-4","right-4","bg-gray-900/70","hover:bg-red-600","p-2","rounded-full","transition-colors","duration-300","opacity-0","group-hover:opacity-100","transform","translate-y-4","group-hover:translate-y-0","transition-all",3,"click"],["iconName","removeImageIcon"],["type","button",1,"absolute","bottom-4","left-4","bg-gray-900/70","hover:bg-purple-600","p-2","rounded-full","transition-colors","duration-300","opacity-0","group-hover:opacity-100","transform","translate-y-4","group-hover:translate-y-0","transition-all",3,"click"],["iconName","fileInputIcon"],["iconName","saveNewsletterIcon"]],template:function(e,i){e&1&&f(0,Qt,82,35,"app-modal"),e&2&&h(i.isVisible?0:-1)},dependencies:[N,B,H,et,K,X,Q,Y,tt,J,Ze,Z,nt,it,M,pe,Pe],encapsulation:2})};function Jt(r,n){if(r&1&&(t(0,"div",9)(1,"div",15),c(2,"app-icon",16),t(3,"span",17),a(4,"Warning"),o()(),t(5,"p",18),a(6),o()()),r&2){let e=p(2);s(6),y(" ",e.warningMessage," ")}}function Yt(r,n){r&1&&(t(0,"span",14),c(1,"app-icon",19),o())}function Kt(r,n){if(r&1){let e=b();t(0,"app-modal",1),d("close",function(){u(e);let l=p();return g(l.onCancel())}),V(1,2),t(2,"div",3),c(3,"app-icon",4),t(4,"h2",5),a(5),o()(),F(),V(6,6),t(7,"div",7)(8,"p",8),a(9),o(),f(10,Jt,7,1,"div",9),o(),F(),V(11,10),t(12,"div",11)(13,"button",12),d("click",function(){u(e);let l=p();return g(l.onCancel())}),a(14),o(),t(15,"button",13),T(16,"async"),d("click",function(){u(e);let l=p();return g(l.onConfirm())}),f(17,Yt,2,0,"span",14),T(18,"async"),a(19),o()(),F(),o()}if(r&2){let e=p();s(5),R(e.title),s(4),y(" ",e.message," "),s(),h(e.warningMessage?10:-1),s(4),y(" ",e.cancelButtonText," "),s(),_("disabled",E(16,7,e.isLoading$)),s(2),h(E(18,9,e.isLoading$)?17:-1),s(2),y(" ",e.deleteButtonText," ")}}var Ne=class r{isVisible=!1;title="Confirm Deletion";message="Are you sure you want to delete this item? This action cannot be undone.";warningMessage="This will permanently delete the item and all related data.";deleteButtonText="Delete";cancelButtonText="Cancel";isLoading$=null;confirmIcon="confirmDeletionIcon";warningIcon="waringDeletionIcon";loadingIcon="deleteLoadingIcon";confirm=new x;cancel=new x;onConfirm(){this.confirm.emit()}onCancel(){this.cancel.emit()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=v({type:r,selectors:[["app-delete-confirmation"]],inputs:{isVisible:"isVisible",title:"title",message:"message",warningMessage:"warningMessage",deleteButtonText:"deleteButtonText",cancelButtonText:"cancelButtonText",isLoading$:"isLoading$",confirmIcon:"confirmIcon",warningIcon:"warningIcon",loadingIcon:"loadingIcon"},outputs:{confirm:"confirm",cancel:"cancel"},decls:1,vars:1,consts:[["size","sm"],["size","sm",3,"close"],["header",""],[1,"flex","items-center","text-red-400"],["iconName","confirmDeletionIcon"],[1,"text-xl","font-semibold"],["body",""],[1,"p-2"],[1,"text-gray-300","mb-4"],[1,"bg-red-900/20","border","border-red-800/30","rounded-md","p-4","mt-4"],["footer",""],[1,"flex","justify-end","space-x-3"],["type","button",1,"px-4","py-2","bg-gray-700","hover:bg-gray-600","text-white","rounded-md","text-sm","font-medium","transition-colors",3,"click"],["type","button",1,"px-4","py-2","bg-red-600","hover:bg-red-700","text-white","rounded-md","text-sm","font-medium","transition-colors","flex","items-center",3,"click","disabled"],[1,"mr-2"],[1,"flex","items-center"],["iconName","waringDeletionIcon"],[1,"font-medium","text-red-400"],[1,"text-sm","text-gray-300","mt-2"],["iconName","deleteLoadingIcon"]],template:function(e,i){e&1&&f(0,Kt,20,11,"app-modal",0),e&2&&h(i.isVisible?0:-1)},dependencies:[B,N,M,me],encapsulation:2})};var Xt=(r,n)=>n._id;function Zt(r,n){if(r&1){let e=b();t(0,"p",18),a(1," Select who you want to send this newsletter to: "),o(),t(2,"div",9)(3,"div",19),d("click",function(){u(e);let l=p(2);return g(l.onSelectRecipientType("subscribers"))}),t(4,"div",20)(5,"input",21),d("click",function(l){return u(e),g(l.stopPropagation())}),o(),t(6,"div",22),C(),t(7,"svg",23),c(8,"path",24),o()(),S(),t(9,"div",25)(10,"h3",26),a(11," Newsletter Subscribers "),o(),t(12,"p",27),a(13," Send to users who subscribed to your newsletter "),o()()()(),t(14,"div",28),d("click",function(){u(e);let l=p(2);return g(l.onSelectRecipientType("users"))}),t(15,"div",20)(16,"input",29),d("click",function(l){return u(e),g(l.stopPropagation())}),o(),t(17,"div",30),C(),t(18,"svg",23),c(19,"path",31),o()(),S(),t(20,"div",25)(21,"h3",26),a(22," Users with CV "),o(),t(23,"p",27),a(24," Send to registered users who have uploaded their CV "),o()()()()(),t(25,"div",32)(26,"div",33),C(),t(27,"svg",34),c(28,"path",35),o(),S(),t(29,"span",36),a(30,"Important Note"),o()(),t(31,"p",37),a(32," Once sent, the newsletter cannot be recalled. Make sure you've reviewed the content before proceeding. "),o()()}if(r&2){let e=p(2);s(3),I("border-purple-400",e.selectedRecipientType==="subscribers")("bg-purple-900",e.selectedRecipientType==="subscribers")("bg-opacity-40",e.selectedRecipientType==="subscribers")("shadow-lg",e.selectedRecipientType==="subscribers")("shadow-purple-500",e.selectedRecipientType==="subscribers")("shadow-opacity-30",e.selectedRecipientType==="subscribers"),s(2),_("checked",e.selectedRecipientType==="subscribers"),s(9),I("border-blue-400",e.selectedRecipientType==="users")("bg-blue-900",e.selectedRecipientType==="users")("bg-opacity-40",e.selectedRecipientType==="users")("shadow-lg",e.selectedRecipientType==="users")("shadow-blue-500",e.selectedRecipientType==="users")("shadow-opacity-30",e.selectedRecipientType==="users"),s(2),_("checked",e.selectedRecipientType==="users")}}function en(r,n){if(r&1){let e=b();t(0,"button",60),d("click",function(){u(e);let l=p(3);return g(l.clearSearch())}),C(),t(1,"svg",61),c(2,"path",62),o()()}}function tn(r,n){if(r&1){let e=b();t(0,"select",48),q("ngModelChange",function(l){u(e);let m=p(3);return W(m.statusFilter,l)||(m.statusFilter=l),g(l)}),d("change",function(){u(e);let l=p(3);return g(l.onFilterChange())}),t(1,"option",63),a(2,"All Status"),o(),t(3,"option",64),a(4,"Confirmed Only"),o(),t(5,"option",65),a(6,"Unconfirmed Only"),o()()}if(r&2){let e=p(3);G("ngModel",e.statusFilter)}}function nn(r,n){r&1&&(t(0,"div",58),c(1,"div",66),t(2,"span",67),a(3,"Loading recipients..."),o()())}function on(r,n){r&1&&(t(0,"span",76),C(),t(1,"svg",84),c(2,"path",85),o(),a(3," Confirmed "),o())}function rn(r,n){r&1&&(t(0,"span",77),C(),t(1,"svg",84),c(2,"path",24),o(),a(3," Pending "),o())}function ln(r,n){if(r&1){let e=b();t(0,"div",70)(1,"div",46)(2,"input",72),d("change",function(){let l=u(e).$implicit,m=p(5);return g(m.onRecipientToggle(l._id))}),o(),t(3,"div",73)(4,"div",74)(5,"span",75),a(6),o(),f(7,on,4,0,"span",76)(8,rn,4,0,"span",77),o(),t(9,"p",78),C(),t(10,"svg",79),c(11,"path",80),o(),a(12),o(),S(),t(13,"p",81),C(),t(14,"svg",82),c(15,"path",83),o(),a(16),T(17,"date"),o()()()()}if(r&2){let e=n.$implicit,i=p(5);s(2),_("checked",i.isRecipientSelected(e._id)),s(4),y(" ",i.getRecipientDisplayName(e)," "),s(),h(i.selectedRecipientType==="subscribers"&&i.isSubscriberConfirmed(e)?7:i.selectedRecipientType==="subscribers"?8:-1),s(5),y(" ",i.getRecipientEmail(e)," "),s(4),y(" Joined ",Qe(17,5,e.createdAt,"short")," ")}}function an(r,n){r&1&&(t(0,"span",89),a(1,"..."),o())}function sn(r,n){if(r&1){let e=b();t(0,"button",91),d("click",function(){u(e);let l=p().$implicit,m=p(6);return g(m.goToPage(+l))}),a(1),o()}if(r&2){let e=p().$implicit,i=p(6);I("bg-purple-600",i.currentPage===+e)("text-white",i.currentPage===+e)("shadow-lg",i.currentPage===+e)("bg-gray-700",i.currentPage!==+e)("bg-opacity-70",i.currentPage!==+e)("hover:bg-gray-600",i.currentPage!==+e)("hover:bg-opacity-70",i.currentPage!==+e),s(),y(" ",e," ")}}function cn(r,n){if(r&1&&f(0,an,2,0,"span",89)(1,sn,2,15,"button",90),r&2){let e=n.$implicit;h(e==="..."?0:1)}}function dn(r,n){if(r&1){let e=b();t(0,"div",71)(1,"div",86)(2,"button",87),d("click",function(){u(e);let l=p(5);return g(l.goToPage(1))}),a(3," First "),o(),t(4,"button",87),d("click",function(){u(e);let l=p(5);return g(l.goToPage(l.currentPage-1))}),a(5," Previous "),o()(),t(6,"div",88),z(7,cn,2,1,null,null,U),o(),t(9,"div",86)(10,"button",87),d("click",function(){u(e);let l=p(5);return g(l.goToPage(l.currentPage+1))}),a(11," Next "),o(),t(12,"button",87),d("click",function(){u(e);let l=p(5);return g(l.goToPage(l.totalPages))}),a(13," Last "),o()()()}if(r&2){let e=p(5);s(2),_("disabled",e.currentPage===1),s(2),_("disabled",e.currentPage===1),s(3),A(e.getVisiblePages()),s(3),_("disabled",e.currentPage===e.totalPages),s(2),_("disabled",e.currentPage===e.totalPages)}}function pn(r,n){if(r&1&&(t(0,"div",69),z(1,ln,18,8,"div",70,Xt),o(),f(3,dn,14,4,"div",71)),r&2){let e=p(4);s(),A(e.paginatedRecipients),s(2),h(e.totalPages>1?3:-1)}}function mn(r,n){if(r&1){let e=b();t(0,"div",92),a(1,"\u{1F50D}"),o(),t(2,"h3",93),a(3," No results found "),o(),t(4,"p",94),a(5," Try adjusting your search or filter criteria "),o(),t(6,"button",95),d("click",function(){u(e);let l=p(5);return g(l.clearFilters())}),a(7," Clear Filters "),o()}}function un(r,n){if(r&1){let e=b();t(0,"div",92),a(1,"\u{1F4E7}"),o(),t(2,"h3",93),a(3),o(),t(4,"p",94),a(5),o(),t(6,"button",95),d("click",function(){u(e);let l=p(5);return g(l.loadRecipients())}),a(7," Reload "),o()}if(r&2){let e=p(5);s(3),y(" No ",e.selectedRecipientType==="subscribers"?"subscribers":"users with CV"," found "),s(2),y(" ",e.selectedRecipientType==="subscribers"?"No one has subscribed to your newsletter yet.":"No users have uploaded their CV yet."," ")}}function gn(r,n){if(r&1&&(t(0,"div",68),f(1,mn,8,0)(2,un,8,2),o()),r&2){let e=p(4);s(),h(e.searchTerm||e.statusFilter!=="all"?1:2)}}function _n(r,n){if(r&1&&f(0,pn,4,1)(1,gn,3,1,"div",68),r&2){let e=p(3);h(e.paginatedRecipients&&e.paginatedRecipients.length>0?0:1)}}function hn(r,n){if(r&1){let e=b();t(0,"div",59)(1,"div",96)(2,"div",20),C(),t(3,"svg",97),c(4,"path",85),o(),S(),t(5,"span",98),a(6,"Ready to Send"),o()(),t(7,"button",99),d("click",function(){u(e);let l=p(3);return g(l.clearAllSelections())}),a(8," Clear All "),o()(),t(9,"p",37),a(10),o()()}if(r&2){let e=p(3);s(10),de(" Newsletter will be sent to ",e.selectedRecipientIds.length," ",e.selectedRecipientType==="subscribers"?"subscriber":"user","",e.selectedRecipientIds.length!==1?"s":"",". ")}}function fn(r,n){if(r&1){let e=b();t(0,"div",9)(1,"div",38)(2,"div",39)(3,"div",40),C(),t(4,"svg",41),c(5,"path",42),o()(),S(),t(6,"input",43),q("ngModelChange",function(l){u(e);let m=p(2);return W(m.searchTerm,l)||(m.searchTerm=l),g(l)}),d("input",function(){u(e);let l=p(2);return g(l.onSearch())}),o(),f(7,en,3,0,"button",44),o(),t(8,"div",45)(9,"div",46),f(10,tn,7,1,"select",47),t(11,"select",48),q("ngModelChange",function(l){u(e);let m=p(2);return W(m.pageSize,l)||(m.pageSize=l),g(l)}),d("change",function(){u(e);let l=p(2);return g(l.onPageSizeChange())}),t(12,"option",49),a(13,"10 per page"),o(),t(14,"option",50),a(15,"20 per page"),o(),t(16,"option",51),a(17,"50 per page"),o(),t(18,"option",52),a(19,"100 per page"),o()()(),t(20,"span",53),a(21),o()()(),t(22,"div",54)(23,"div",46)(24,"input",55),d("change",function(){u(e);let l=p(2);return g(l.onSelectAllFiltered())}),o(),t(25,"span",56),a(26),o()(),t(27,"div",57),a(28),o()(),f(29,nn,4,0,"div",58)(30,_n,2,1)(31,hn,11,3,"div",59),o()}if(r&2){let e=p(2);s(6),G("ngModel",e.searchTerm),s(),h(e.searchTerm?7:-1),s(3),h(e.selectedRecipientType==="subscribers"?10:-1),s(),G("ngModel",e.pageSize),s(10),de(" ",e.filteredRecipients.length," of ",e.currentRecipients.length," ",e.selectedRecipientType==="subscribers"?"subscribers":"users"," "),s(3),_("checked",e.allFilteredSelected)("indeterminate",e.isIndeterminate),s(2),oe(" Select All on Page (",e.selectedRecipientIds.length," of ",e.currentRecipients.length," total selected) "),s(2),oe(" Page ",e.currentPage," of ",e.totalPages," "),s(),h(e.isCurrentlyLoading?29:30),s(2),h(e.selectedRecipientIds.length>0?31:-1)}}function Cn(r,n){if(r&1){let e=b();t(0,"button",100),d("click",function(){u(e);let l=p(2);return g(l.onPrevious())}),C(),t(1,"svg",101),c(2,"path",102),o(),S(),t(3,"span"),a(4,"Previous"),o()()}if(r&2){let e=p(2);_("disabled",e.isSendingNewsletter)}}function bn(r,n){r&1&&c(0,"div")}function xn(r,n){if(r&1){let e=b();t(0,"button",103),d("click",function(){u(e);let l=p(2);return g(l.onNext())}),t(1,"span"),a(2,"Next"),o(),C(),t(3,"svg",101),c(4,"path",104),o()()}if(r&2){let e=p(2);_("disabled",!e.canProceed)}}function wn(r,n){r&1&&c(0,"div",106)}function vn(r,n){r&1&&(C(),t(0,"svg",101),c(1,"path",107),o())}function yn(r,n){if(r&1){let e=b();t(0,"button",105),d("click",function(){u(e);let l=p(2);return g(l.onSendNewsletter())}),f(1,wn,1,0,"div",106)(2,vn,2,0,":svg:svg",101),t(3,"span"),a(4),o()()}if(r&2){let e=p(2);I("opacity-90",e.isSendingNewsletter),_("disabled",!e.canSendNewsletter),s(),h(e.isSendingNewsletter?1:2),s(3),R(e.sendButtonText)}}function Sn(r,n){if(r&1&&(t(0,"div",17)(1,"div",108),c(2,"div",109),t(3,"h3",110),a(4,"Sending Newsletter"),o(),t(5,"p",111),a(6),o()()()),r&2){let e=p(2);s(6),de(" Please wait while we send your newsletter to ",e.selectedRecipientIds.length," ",e.selectedRecipientType==="subscribers"?"subscriber":"user","",e.selectedRecipientIds.length!==1?"s":"","... ")}}function Mn(r,n){if(r&1){let e=b();t(0,"app-modal",1),d("close",function(){u(e);let l=p();return g(l.onClose())}),V(1,2),t(2,"div",3),C(),t(3,"svg",4),c(4,"path",5),o(),S(),t(5,"h2",6),a(6),o()(),F(),V(7,7),t(8,"div",8),f(9,Zt,33,26)(10,fn,32,15,"div",9),o(),F(),V(11,10),t(12,"div",11),f(13,Cn,5,1,"button",12)(14,bn,1,0,"div"),t(15,"div",13)(16,"button",14),d("click",function(){u(e);let l=p();return g(l.onClose())}),a(17," Cancel "),o(),f(18,xn,5,1,"button",15)(19,yn,5,5,"button",16),o()(),F(),f(20,Sn,7,3,"div",17),o()}if(r&2){let e=p();s(6),R(e.stepTitle),s(3),h(e.currentStep==="select-type"?9:-1),s(),h(e.currentStep==="select-recipients"?10:-1),s(3),h(e.currentStep==="select-recipients"?13:14),s(3),_("disabled",e.isSendingNewsletter),s(2),h(e.currentStep==="select-type"?18:19),s(2),h(e.isSendingNewsletter?20:-1)}}var ke=class r{store=j(ge);destroy$=new ae;show=!1;newsletterId=null;close=new x;sendNewsletter=new x;currentStep="select-type";selectedRecipientType=null;selectedRecipientIds=[];subscribers$;usersWithCv$;subscribersLoading$;usersLoading$;subscribers=[];usersWithCv=[];allSelected=!1;sendToSubscribersLoading$;sendToUsersWithCvLoading$;sendToSubscribersSuccess$;sendToUsersWithCvSuccess$;isLoadingSubscribers=!1;isLoadingUsers=!1;isSendingNewsletter=!1;searchTerm="";statusFilter="all";currentPage=1;pageSize=20;filteredRecipients=[];paginatedRecipients=[];constructor(){this.subscribers$=this.store.select(rt),this.usersWithCv$=this.store.select(at),this.subscribersLoading$=this.store.select(lt),this.usersLoading$=this.store.select(st),this.sendToSubscribersLoading$=this.store.select(he),this.sendToUsersWithCvLoading$=this.store.select(Ce),this.sendToSubscribersSuccess$=this.store.select(fe),this.sendToUsersWithCvSuccess$=this.store.select(be)}ngOnInit(){this.setupSubscriptions()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setupSubscriptions(){this.subscribers$.pipe(P(this.destroy$)).subscribe(n=>{console.log("Subscribers loaded:",n),this.subscribers=n||[],this.applyFiltersAndPagination()}),this.usersWithCv$.pipe(P(this.destroy$)).subscribe(n=>{console.log("Users with CV loaded:",n),this.usersWithCv=n||[],this.applyFiltersAndPagination()}),this.subscribersLoading$.pipe(P(this.destroy$)).subscribe(n=>{this.isLoadingSubscribers=n}),this.usersLoading$.pipe(P(this.destroy$)).subscribe(n=>{this.isLoadingUsers=n}),this.sendToSubscribersLoading$.pipe(P(this.destroy$)).subscribe(n=>{this.selectedRecipientType==="subscribers"&&(this.isSendingNewsletter=n)}),this.sendToUsersWithCvLoading$.pipe(P(this.destroy$)).subscribe(n=>{this.selectedRecipientType==="users"&&(this.isSendingNewsletter=n)}),this.sendToSubscribersSuccess$.pipe(P(this.destroy$),Ie(n=>n===!0)).subscribe(()=>{this.selectedRecipientType==="subscribers"&&this.handleSendSuccess()}),this.sendToUsersWithCvSuccess$.pipe(P(this.destroy$),Ie(n=>n===!0)).subscribe(()=>{this.selectedRecipientType==="users"&&this.handleSendSuccess()})}handleSendSuccess(){this.isSendingNewsletter=!1,setTimeout(()=>{this.onClose()},1e3)}onClose(){this.resetModal(),this.close.emit()}resetModal(){this.currentStep="select-type",this.selectedRecipientType=null,this.selectedRecipientIds=[],this.allSelected=!1,this.searchTerm="",this.statusFilter="all",this.currentPage=1,this.filteredRecipients=[],this.paginatedRecipients=[],this.isSendingNewsletter=!1}onSelectRecipientType(n){this.selectedRecipientType=n,this.selectedRecipientIds=[],this.allSelected=!1,this.resetFilters()}onNext(){this.currentStep==="select-type"&&this.selectedRecipientType&&(this.currentStep="select-recipients",this.loadRecipients())}loadRecipients(){console.log("Loading recipients for type:",this.selectedRecipientType),this.selectedRecipientType==="subscribers"?this.store.dispatch(Fe.loadAllSubscribers()):this.selectedRecipientType==="users"&&this.store.dispatch(Fe.loadUsersWithCv())}onPrevious(){this.currentStep==="select-recipients"&&(this.currentStep="select-type",this.selectedRecipientIds=[],this.allSelected=!1,this.resetFilters())}onSearch(){this.currentPage=1,this.applyFiltersAndPagination()}onFilterChange(){this.currentPage=1,this.applyFiltersAndPagination()}clearSearch(){this.searchTerm="",this.onSearch()}clearFilters(){this.searchTerm="",this.statusFilter="all",this.currentPage=1,this.applyFiltersAndPagination()}resetFilters(){this.searchTerm="",this.statusFilter="all",this.currentPage=1}applyFiltersAndPagination(){let n=this.currentRecipients;if(this.searchTerm.trim()){let l=this.searchTerm.toLowerCase();n=n.filter(m=>{let O=this.getRecipientDisplayName(m).toLowerCase(),re=this.getRecipientEmail(m).toLowerCase();return O.includes(l)||re.includes(l)})}this.selectedRecipientType==="subscribers"&&this.statusFilter!=="all"&&(n=n.filter(l=>{let m=this.isSubscriberConfirmed(l);return this.statusFilter==="confirmed"?m:!m})),this.filteredRecipients=n;let e=(this.currentPage-1)*this.pageSize,i=e+this.pageSize;this.paginatedRecipients=this.filteredRecipients.slice(e,i),this.updateAllSelectedState()}onPageSizeChange(){this.currentPage=1,this.applyFiltersAndPagination()}goToPage(n){n>=1&&n<=this.totalPages&&(this.currentPage=n,this.applyFiltersAndPagination())}getVisiblePages(){let n=this.totalPages,e=this.currentPage,i=[];if(n<=7)for(let l=1;l<=n;l++)i.push(l);else{i.push(1),e>4&&i.push("...");let l=Math.max(2,e-1),m=Math.min(n-1,e+1);for(let O=l;O<=m;O++)i.push(O);e<n-3&&i.push("..."),n>1&&i.push(n)}return i}get totalPages(){return Math.ceil(this.filteredRecipients.length/this.pageSize)}onRecipientToggle(n){let e=this.selectedRecipientIds.indexOf(n);e>-1?this.selectedRecipientIds.splice(e,1):this.selectedRecipientIds.push(n),this.updateAllSelectedState()}isRecipientSelected(n){return this.selectedRecipientIds.includes(n)}onSelectAllFiltered(){let n=this.paginatedRecipients.map(e=>e._id);this.allFilteredSelected?this.selectedRecipientIds=this.selectedRecipientIds.filter(e=>!n.includes(e)):n.forEach(e=>{this.selectedRecipientIds.includes(e)||this.selectedRecipientIds.push(e)}),this.updateAllSelectedState()}clearAllSelections(){this.selectedRecipientIds=[],this.updateAllSelectedState()}updateAllSelectedState(){if(!this.selectedRecipientType||this.paginatedRecipients.length===0){this.allSelected=!1;return}let n=this.paginatedRecipients.map(i=>i._id),e=n.filter(i=>this.selectedRecipientIds.includes(i));this.allSelected=e.length===n.length}get allFilteredSelected(){return this.paginatedRecipients.length===0?!1:this.paginatedRecipients.map(e=>e._id).every(e=>this.selectedRecipientIds.includes(e))}onSendNewsletter(){this.newsletterId&&this.selectedRecipientType&&this.selectedRecipientIds.length>0&&(this.selectedRecipientType==="subscribers"?this.store.dispatch(k.sendNewsletterToSelectedSubscribers({id:this.newsletterId,subscriberIds:this.selectedRecipientIds})):this.selectedRecipientType==="users"&&this.store.dispatch(k.sendNewsletterToSelectedUsersWithCv({id:this.newsletterId,userIds:this.selectedRecipientIds})),this.sendNewsletter.emit({newsletterId:this.newsletterId,recipientType:this.selectedRecipientType,recipientIds:this.selectedRecipientIds}))}get canSendNewsletter(){return this.canProceed&&!this.isSendingNewsletter}get sendButtonText(){return this.isSendingNewsletter?"Sending...":`Send Newsletter (${this.selectedRecipientIds.length})`}get currentRecipients(){if(!this.selectedRecipientType)return[];let n=this.selectedRecipientType==="subscribers"?this.subscribers:this.usersWithCv;return console.log("Current recipients getter called:",{selectedType:this.selectedRecipientType,subscribersLength:this.subscribers.length,usersLength:this.usersWithCv.length,recipientsLength:n.length,recipients:n}),n}get isCurrentlyLoading(){return this.selectedRecipientType==="subscribers"?this.isLoadingSubscribers:this.selectedRecipientType==="users"?this.isLoadingUsers:!1}get canProceed(){return this.currentStep==="select-type"?!!this.selectedRecipientType:this.selectedRecipientIds.length>0}get stepTitle(){return this.currentStep==="select-type"?"Choose Recipients":`Select ${this.selectedRecipientType==="subscribers"?"Subscribers":"Users"}`}getRecipientDisplayName(n){return"personalInfo"in n?`${n.personalInfo.firstName} ${n.personalInfo.lastName}`:n.email}getRecipientEmail(n){return"personalInfo"in n?n.personalInfo.email:n.email}isSubscriberConfirmed(n){return"isConfirmed"in n&&n.isConfirmed}get isIndeterminate(){let n=this.selectedRecipientType==="subscribers"?this.subscribers.length:this.usersWithCv.length;return this.selectedRecipientIds.length>0&&this.selectedRecipientIds.length<n}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=v({type:r,selectors:[["app-recipient-selection-modal"]],inputs:{show:"show",newsletterId:"newsletterId"},outputs:{close:"close",sendNewsletter:"sendNewsletter"},decls:1,vars:1,consts:[["size","lg"],["size","lg",3,"close"],["header",""],[1,"flex","items-center","text-purple-400"],["fill","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","mr-3"],["d","M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"],[1,"text-xl","font-semibold"],["body",""],[1,"p-6"],[1,"space-y-6"],["footer",""],[1,"flex","justify-between","p-6","border-t","border-gray-600","border-opacity-30"],["type","button",1,"px-6","py-3","bg-gray-700","hover:bg-gray-600","text-white","rounded-lg","font-medium","transition-all","duration-200","flex","items-center","space-x-2","transform","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[1,"flex","space-x-4"],["type","button",1,"px-6","py-3","bg-gray-700","hover:bg-gray-600","text-white","rounded-lg","font-medium","transition-all","duration-200","transform","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["type","button",1,"px-6","py-3","bg-purple-600","hover:bg-purple-700","text-white","rounded-lg","font-medium","transition-all","duration-200","disabled:opacity-50","flex","items-center","space-x-2","transform","disabled:transform-none",3,"disabled"],["type","button",1,"px-6","py-3","bg-green-600","hover:bg-green-700","text-white","rounded-lg","font-medium","transition-all","duration-200","disabled:opacity-50","flex","items-center","space-x-2","transform","disabled:transform-none","shadow-lg","disabled:cursor-not-allowed",3,"disabled","opacity-90"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"text-gray-300","mb-8","text-lg"],[1,"bg-gray-800","bg-opacity-50","backdrop-blur-sm","border-2","border-gray-600","border-opacity-50","rounded-xl","p-6","cursor-pointer","hover:border-purple-400","hover:border-opacity-70","hover:shadow-lg","transition-all","duration-300","group","transform",3,"click"],[1,"flex","items-center"],["type","radio","name","recipientType",1,"w-5","h-5","text-purple-600","bg-gray-700","border-gray-500","focus:ring-purple-500","focus:ring-2","focus:ring-offset-0",3,"click","checked"],[1,"bg-gradient-to-br","from-purple-600","to-purple-700","p-4","rounded-xl","group-hover:from-purple-500","group-hover:to-purple-600","transition-all","duration-300","ml-6","shadow-lg"],["fill","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-white"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"],[1,"ml-6"],[1,"text-xl","font-semibold","text-white","mb-2"],[1,"text-gray-400","leading-relaxed"],[1,"bg-gray-800","bg-opacity-50","backdrop-blur-sm","border-2","border-gray-600","border-opacity-50","rounded-xl","p-6","cursor-pointer","hover:border-blue-400","hover:border-opacity-70","hover:shadow-lg","transition-all","duration-300","group","transform",3,"click"],["type","radio","name","recipientType",1,"w-5","h-5","text-blue-600","bg-gray-700","border-gray-500","focus:ring-blue-500","focus:ring-2","focus:ring-offset-0",3,"click","checked"],[1,"bg-gradient-to-br","from-blue-600","to-blue-700","p-4","rounded-xl","group-hover:from-blue-500","group-hover:to-blue-600","transition-all","duration-300","ml-6","shadow-lg"],["d","M16 4c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zM4 18v-4h3v-3c0-.55.45-1 1-1h5c.55 0 1 .45 1 1v5h3v4H4z"],[1,"bg-yellow-900","bg-opacity-30","backdrop-blur-sm","border","border-yellow-700","border-opacity-50","rounded-xl","p-6","mt-8"],[1,"flex","items-center","mb-3"],["fill","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-yellow-400","mr-3"],["d","M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"],[1,"font-semibold","text-yellow-400"],[1,"text-gray-300","leading-relaxed"],[1,"bg-gray-800","bg-opacity-40","backdrop-blur-sm","p-6","rounded-xl","border","border-gray-600","border-opacity-30","space-y-4"],[1,"relative"],[1,"absolute","inset-y-0","left-0","pl-4","flex","items-center","pointer-events-none"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","text","placeholder","Search by name or email...",1,"w-full","pl-12","pr-12","py-3","bg-gray-700","bg-opacity-50","border","border-gray-600","border-opacity-50","rounded-lg","text-white","placeholder-gray-400","focus:ring-2","focus:ring-purple-500","focus:border-transparent","transition-all","duration-200",3,"ngModelChange","input","ngModel"],[1,"absolute","inset-y-0","right-0","pr-4","flex","items-center","text-gray-400","hover:text-white","transition-colors"],[1,"flex","items-center","justify-between"],[1,"flex","items-center","space-x-4"],[1,"bg-gray-700","bg-opacity-70","border","border-gray-600","border-opacity-50","rounded-lg","text-white","text-sm","px-4","py-2","focus:ring-2","focus:ring-purple-500","focus:border-transparent",3,"ngModel"],[1,"bg-gray-700","bg-opacity-70","border","border-gray-600","border-opacity-50","rounded-lg","text-white","text-sm","px-4","py-2","focus:ring-2","focus:ring-purple-500","focus:border-transparent",3,"ngModelChange","change","ngModel"],["value","10"],["value","20"],["value","50"],["value","100"],[1,"text-sm","text-gray-400","bg-gray-700","bg-opacity-30","px-4","py-2","rounded-lg"],[1,"flex","items-center","justify-between","bg-gray-800","bg-opacity-40","backdrop-blur-sm","p-5","rounded-xl","border","border-gray-600","border-opacity-30"],["type","checkbox",1,"w-5","h-5","text-purple-600","bg-gray-700","border-gray-600","rounded","focus:ring-purple-500","focus:ring-2",3,"change","checked","indeterminate"],[1,"text-sm","font-medium","text-gray-300"],[1,"text-sm","text-gray-400","bg-gray-700","bg-opacity-40","px-3","py-1","rounded-lg"],[1,"flex","items-center","justify-center","py-12"],[1,"bg-purple-900","bg-opacity-30","backdrop-blur-sm","border","border-purple-700","border-opacity-50","rounded-xl","p-6"],[1,"absolute","inset-y-0","right-0","pr-4","flex","items-center","text-gray-400","hover:text-white","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],["value","all"],["value","confirmed"],["value","unconfirmed"],[1,"animate-spin","rounded-full","h-10","w-10","border-b-2","border-purple-600"],[1,"ml-4","text-gray-400","text-lg"],[1,"text-center","py-12","bg-gray-800","bg-opacity-20","rounded-xl","border","border-gray-600","border-opacity-20"],[1,"space-y-3"],[1,"bg-gray-800","bg-opacity-40","backdrop-blur-sm","border","border-gray-600","border-opacity-30","rounded-xl","p-5","hover:border-gray-500","hover:border-opacity-50","hover:shadow-lg","transition-all","duration-200","transform"],[1,"flex","items-center","justify-between","bg-gray-800","bg-opacity-40","backdrop-blur-sm","p-5","rounded-xl","border","border-gray-600","border-opacity-30","mt-6"],["type","checkbox",1,"w-5","h-5","text-purple-600","bg-gray-700","border-gray-600","rounded","focus:ring-purple-500","focus:ring-2",3,"change","checked"],[1,"flex-1"],[1,"flex","items-center","space-x-3","mb-2"],[1,"text-base","font-semibold","text-white"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-xs","font-medium","bg-green-900","bg-opacity-50","text-green-400","border","border-green-700","border-opacity-50","backdrop-blur-sm"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-xs","font-medium","bg-yellow-900","bg-opacity-50","text-yellow-400","border","border-yellow-700","border-opacity-50","backdrop-blur-sm"],[1,"text-sm","text-gray-400","mb-1","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"],[1,"text-xs","text-gray-500","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],["fill","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","mr-1"],["d","M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"],[1,"flex","items-center","space-x-3"],[1,"px-4","py-2","bg-gray-700","bg-opacity-70","hover:bg-gray-600","hover:bg-opacity-70","text-white","rounded-lg","text-sm","font-medium","transition-all","duration-200","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"flex","items-center","space-x-2"],[1,"px-3","py-2","text-gray-400"],[1,"px-4","py-2","rounded-lg","text-sm","font-medium","transition-all","duration-200",3,"bg-purple-600","text-white","shadow-lg","bg-gray-700","bg-opacity-70","hover:bg-gray-600","hover:bg-opacity-70"],[1,"px-4","py-2","rounded-lg","text-sm","font-medium","transition-all","duration-200",3,"click"],[1,"text-6xl","mb-6"],[1,"text-xl","font-semibold","text-gray-400","mb-3"],[1,"text-gray-500","mb-6","leading-relaxed"],["type","button",1,"px-6","py-3","bg-purple-600","hover:bg-purple-700","text-white","rounded-lg","font-medium","transition-all","duration-200","transform",3,"click"],[1,"flex","items-center","justify-between","mb-3"],["fill","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-purple-400","mr-3"],[1,"font-semibold","text-purple-400"],[1,"text-sm","text-gray-400","hover:text-white","underline","transition-colors",3,"click"],["type","button",1,"px-6","py-3","bg-gray-700","hover:bg-gray-600","text-white","rounded-lg","font-medium","transition-all","duration-200","flex","items-center","space-x-2","transform","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],["type","button",1,"px-6","py-3","bg-purple-600","hover:bg-purple-700","text-white","rounded-lg","font-medium","transition-all","duration-200","disabled:opacity-50","flex","items-center","space-x-2","transform","disabled:transform-none",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],["type","button",1,"px-6","py-3","bg-green-600","hover:bg-green-700","text-white","rounded-lg","font-medium","transition-all","duration-200","disabled:opacity-50","flex","items-center","space-x-2","transform","disabled:transform-none","shadow-lg","disabled:cursor-not-allowed",3,"click","disabled"],[1,"animate-spin","rounded-full","h-4","w-4","border-b-2","border-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 19l9 2-9-18-9 18 9-2zm0 0v-8"],[1,"bg-gray-800","rounded-xl","p-6","max-w-sm","mx-4","text-center","border","border-gray-600"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-green-500","mx-auto","mb-4"],[1,"text-lg","font-semibold","text-white","mb-2"],[1,"text-gray-400"]],template:function(e,i){e&1&&f(0,Mn,21,7,"app-modal",0),e&2&&h(i.show?0:-1)},dependencies:[B,M,ue,Z,K,X,Q,Y,J,H,_e],encapsulation:2})};var bt=class r{store=j(ge);destroy$=new ae;showCreateModal=!1;showDeleteConfirmation=!1;showRecipientSelection=!1;selectedNewsletterIdForSending=null;currentPage=1;selectedFilter=null;newsletters$=this.store.select(pt).pipe(Ue(n=>n||[]));loading$=this.store.select(mt);error$=this.store.select(ut);pagination$=this.store.select(gt);analytics$=this.store.select(ft);createLoading$=this.store.select(ct);deleteLoading$=this.store.select(_t);sendToSelectedSubscribersLoading$=this.store.select(he);sendToSelectedUsersWithCvLoading$=this.store.select(Ce);ngOnInit(){this.loadNewsletters(),this.loadAnalytics(),this.setupSubscriptions()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setupSubscriptions(){this.store.select(dt).pipe(P(this.destroy$)).subscribe(n=>{n&&(this.closeCreateModal(),this.loadNewsletters(),this.store.dispatch(k.resetCreateStatus()))}),this.store.select(ht).pipe(P(this.destroy$)).subscribe(n=>{n&&(this.loadNewsletters(),this.loadAnalytics(),this.showDeleteConfirmation=!1,this.store.dispatch(k.resetDeleteStatus()))}),this.store.select(fe).pipe(P(this.destroy$)).subscribe(n=>{n&&(this.closeAllSendModals(),this.loadNewsletters(),this.loadAnalytics(),this.store.dispatch(k.resetSendToSelectedSubscribersStatus()))}),this.store.select(be).pipe(P(this.destroy$)).subscribe(n=>{n&&(this.closeAllSendModals(),this.loadNewsletters(),this.loadAnalytics(),this.store.dispatch(k.resetSendToSelectedUsersWithCvStatus()))})}openCreateModal(){this.showCreateModal=!0}closeCreateModal(){this.showCreateModal=!1}onNewsletterCreate(n){this.store.dispatch(k.createNewsletter({request:n}))}onFilterChange(n){this.selectedFilter=n,this.currentPage=1,this.loadNewsletters()}onNewsletterSelect(n){console.log("Newsletter selected:",n)}openSendConfirmation(n,e){n&&(e&&e.stopPropagation(),this.selectedNewsletterIdForSending=n,this.showRecipientSelection=!0)}openDeleteConfirmation(n,e){n&&(e.stopPropagation(),this.showDeleteConfirmation=!0)}closeDeleteConfirmation(){this.showDeleteConfirmation=!1}confirmDelete(){this.store.dispatch(k.deleteNewsletter({id:"newsletterIdToDelete"}))}closeRecipientSelection(){this.showRecipientSelection=!1,this.selectedNewsletterIdForSending=null}onSendNewsletter(n){let{newsletterId:e,recipientType:i,recipientIds:l}=n;i==="subscribers"?this.store.dispatch(k.sendNewsletterToSelectedSubscribers({id:e,subscriberIds:l})):i==="users"&&this.store.dispatch(k.sendNewsletterToSelectedUsersWithCv({id:e,userIds:l}))}onPageChange(n){this.currentPage=n,this.loadNewsletters()}closeAllSendModals(){this.showRecipientSelection=!1,this.selectedNewsletterIdForSending=null}loadNewsletters(){this.store.dispatch(k.loadNewsletters({page:this.currentPage,limit:10,status:this.selectedFilter||void 0}))}loadAnalytics(){this.store.dispatch(k.loadAnalytics())}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=v({type:r,selectors:[["app-manage-newsletter"]],decls:22,vars:25,consts:[[1,"flex","flex-col","h-full","bg-gray-900","text-white"],[1,"p-6","border-b","border-gray-800"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-2xl","font-semibold"],[1,"flex","items-center","bg-purple-600","hover:bg-purple-700","text-white","px-4","py-2","rounded-md","text-sm","font-medium","transition-colors",3,"click"],["iconName","newsletterCreateIcon"],[3,"analytics"],[1,"flex","flex-wrap","items-center","justify-between","gap-4"],[3,"filterChange","selectedFilter"],[1,"p-6","flex-grow"],[3,"select","send","delete","create","pageChange","newsletters","loading","error","pagination","currentPage"],[3,"close","submit","isVisible","isLoading"],["title","Confirm Deletion","message","Are you sure you want to delete this newsletter? This action cannot be undone.","warningMessage","This will permanently delete the newsletter and all related statistics.","deleteButtonText","Delete","cancelButtonText","Cancel",3,"confirm","cancel","isVisible","isLoading$"],[3,"close","sendNewsletter","show","newsletterId"]],template:function(e,i){if(e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),a(4,"Newsletter Management"),o(),t(5,"button",4),d("click",function(){return i.openCreateModal()}),c(6,"app-icon",5),a(7," Create Newsletter "),o()(),c(8,"app-newsletter-analytics",6),T(9,"async"),t(10,"div",7)(11,"app-newsletter-filter",8),d("filterChange",function(m){return i.onFilterChange(m)}),o()()(),t(12,"div",9)(13,"app-newsletter-list",10),T(14,"async"),T(15,"async"),T(16,"async"),T(17,"async"),d("select",function(m){return i.onNewsletterSelect(m)})("send",function(m){return i.openSendConfirmation(m.id,m.event)})("delete",function(m){return i.openDeleteConfirmation(m.id,m.event)})("create",function(){return i.openCreateModal()})("pageChange",function(m){return i.onPageChange(m)}),o()(),t(18,"app-newsletter-creation-modal",11),T(19,"async"),d("close",function(){return i.closeCreateModal()})("submit",function(m){return i.onNewsletterCreate(m)}),o(),t(20,"app-delete-confirmation",12),d("confirm",function(){return i.confirmDelete()})("cancel",function(){return i.closeDeleteConfirmation()}),o(),t(21,"app-recipient-selection-modal",13),d("close",function(){return i.closeRecipientSelection()})("sendNewsletter",function(m){return i.onSendNewsletter(m)}),o()()),e&2){let l;s(8),_("analytics",E(9,13,i.analytics$)),s(3),_("selectedFilter",i.selectedFilter),s(2),_("newsletters",E(14,15,i.newsletters$))("loading",E(15,17,i.loading$))("error",E(16,19,i.error$))("pagination",E(17,21,i.pagination$))("currentPage",i.currentPage),s(5),_("isVisible",i.showCreateModal)("isLoading",(l=E(19,23,i.createLoading$))!==null&&l!==void 0?l:!1),s(2),_("isVisible",i.showDeleteConfirmation)("isLoading$",i.deleteLoading$),s(),_("show",i.showRecipientSelection)("newsletterId",i.selectedNewsletterIdForSending)}},dependencies:[M,me,Z,H,Xe,N,xe,we,Te,Ee,Ne,ke],encapsulation:2})};export{bt as ManageNewsletterComponent};
