import{a as S}from"./chunk-XBOGOXXA.js";import{a as ie}from"./chunk-WLTH2OZR.js";import{b as ne,c as C,e as re,f as oe,g as se,h as le,j as ae,m as ce,n as de,o as me,p as pe,r as ge,s as ue,t as ve}from"./chunk-3KNO5B5Q.js";import{p as te,r as b}from"./chunk-TYWYGKBN.js";import"./chunk-PZKXZ6XN.js";import{k as K,l as Q,n as X,o as Z,r as ee}from"./chunk-E3YMVHEH.js";import{$b as D,Aa as y,Bc as p,Cb as u,Cc as g,Ec as J,K as O,Nb as c,Qb as P,Xb as i,Yb as n,Zb as d,_b as j,ac as R,da as M,dc as _,ec as m,j as G,mb as o,nc as H,oc as l,pc as E,qc as f,rb as V,rc as q,tc as U,uc as W,vc as Y,xa as v,xb as N,ya as h,za as x}from"./chunk-VJULP7QK.js";var F=t=>t.role,I=b(F,t=>t.roles),he=b(F,t=>t.selectedRole),T=b(F,t=>t.loading),$=b(F,t=>t.creating),B=b(F,t=>t.assigning),A=b(F,t=>t.error),L=b(F,t=>t.successMessage),z=b(I,t=>t.filter(r=>r.isActive!==!1));var xe=b(I,t=>t.length),qe=b(z,t=>t.length),_e=b(T,$,B,(t,r,e)=>t||r||e),Ue=b(A,t=>!!t),We=b(L,t=>!!t);function be(t,r){if(t&1){let e=R();i(0,"div",36)(1,"div",37),x(),i(2,"svg",38),d(3,"path",39),n(),y(),i(4,"div")(5,"div",40),l(6,"Error"),n(),i(7,"div",41),l(8),n()()(),i(9,"button",42),_("click",function(){v(e);let a=m(2);return h(a.clearMessages())}),x(),i(10,"svg",43),d(11,"path",44),n()()()}if(t&2){let e=r.ngIf;o(8),E(e.message)}}function we(t,r){if(t&1){let e=R();i(0,"div",45)(1,"div",37),x(),i(2,"svg",46),d(3,"path",47),n(),y(),i(4,"div")(5,"div",40),l(6,"Success"),n(),i(7,"div",48),l(8),n()()(),i(9,"button",49),_("click",function(){v(e);let a=m(2);return h(a.clearMessages())}),x(),i(10,"svg",43),d(11,"path",44),n()()()}if(t&2){let e=r.ngIf;o(8),E(e)}}function Ce(t,r){if(t&1&&(i(0,"div",15),u(1,be,12,1,"div",34),p(2,"async"),u(3,we,12,1,"div",35),p(4,"async"),n()),t&2){let e=m();o(),c("ngIf",g(2,2,e.error$)),o(2),c("ngIf",g(4,4,e.successMessage$))}}function ye(t,r){if(t&1&&(i(0,"div",71),l(1),n()),t&2){let e=m(2);o(),f(" ",e.getFieldError(e.createRoleForm,"name")," ")}}function Re(t,r){if(t&1&&(i(0,"div",71),l(1),n()),t&2){let e=m(2);o(),f(" ",e.getFieldError(e.createRoleForm,"description")," ")}}function Se(t,r){t&1&&(x(),i(0,"svg",77),d(1,"path",78),n())}function Me(t,r){if(t&1){let e=R();i(0,"div",37)(1,"div",72)(2,"input",73),_("change",function(){let a=v(e).$implicit,w=m(2);return h(w.togglePermission(a))}),n(),i(3,"div",74),_("click",function(){let a=v(e).$implicit,w=m(2);return h(w.togglePermission(a))}),u(4,Se,2,0,"svg",75),n()(),i(5,"label",76),l(6),p(7,"titlecase"),n()()}if(t&2){let e=r.$implicit,s=m(2);o(2),c("id",e)("checked",s.isPermissionSelected(e)),o(),P(s.isPermissionSelected(e)?"bg-purple-600 border-purple-600":"bg-slate-700 border-slate-600"),o(),c("ngIf",s.isPermissionSelected(e)),o(),c("for",e),o(),f(" ",g(7,7,e.replace("_"," "))," ")}}function Fe(t,r){t&1&&(i(0,"div",79),l(1," At least one permission is required "),n())}function Ee(t,r){t&1&&(x(),i(0,"svg",80),d(1,"path",81),n())}function Ie(t,r){if(t&1){let e=R();i(0,"div",50)(1,"div",51)(2,"h2",52),l(3,"Create New Role"),n(),i(4,"button",53),_("click",function(){v(e);let a=m();return h(a.toggleCreateForm())}),x(),i(5,"svg",54),d(6,"path",44),n()()(),y(),i(7,"form",55),_("ngSubmit",function(){v(e);let a=m();return h(a.createRole())}),i(8,"div",56)(9,"div")(10,"label",57),l(11,"Role Name *"),n(),d(12,"input",58),u(13,ye,2,1,"div",59),n(),i(14,"div")(15,"label",57),l(16,"Description"),n(),d(17,"input",60),u(18,Re,2,1,"div",59),n()(),i(19,"div")(20,"label",61),l(21,"Permissions *"),n(),i(22,"div",62),u(23,Me,8,9,"div",63),n(),u(24,Fe,2,0,"div",64),n(),i(25,"div",65)(26,"button",66),_("click",function(){v(e);let a=m();return h(a.toggleCreateForm())}),l(27," Cancel "),n(),i(28,"button",67),p(29,"async"),u(30,Ee,2,0,"svg",68),p(31,"async"),x(),i(32,"svg",69),d(33,"path",70),n(),l(34),p(35,"async"),n()()()()}if(t&2){let e=m();o(7),c("formGroup",e.createRoleForm),o(6),c("ngIf",e.getFieldError(e.createRoleForm,"name")),o(5),c("ngIf",e.getFieldError(e.createRoleForm,"description")),o(5),c("ngForOf",e.availablePermissions),o(),c("ngIf",e.getFieldError(e.createRoleForm,"permissions")),o(4),c("disabled",!e.isCreateFormValid||g(29,8,e.creating$)),o(2),c("ngIf",g(31,10,e.creating$)),o(4),f(" ",g(35,12,e.creating$)?"Creating...":"Create Role"," ")}}function ke(t,r){if(t&1&&(i(0,"div",71),l(1),n()),t&2){let e=m(2);o(),f(" ",e.getFieldError(e.assignRoleForm,"userId")," ")}}function Oe(t,r){if(t&1&&(i(0,"option",89),l(1),n()),t&2){let e=r.$implicit;c("value",e._id),o(),f(" ",e.name," ")}}function Ve(t,r){if(t&1&&(i(0,"div",71),l(1),n()),t&2){let e=m(2);o(),f(" ",e.getFieldError(e.assignRoleForm,"roleId")," ")}}function Pe(t,r){t&1&&(x(),i(0,"svg",80),d(1,"path",81),n())}function Te(t,r){if(t&1){let e=R();i(0,"div",50)(1,"div",51)(2,"h2",52),l(3,"Assign Role to User"),n(),i(4,"button",53),_("click",function(){v(e);let a=m();return h(a.toggleAssignForm())}),x(),i(5,"svg",54),d(6,"path",44),n()()(),y(),i(7,"form",55),_("ngSubmit",function(){v(e);let a=m();return h(a.assignRole())}),i(8,"div",56)(9,"div")(10,"label",57),l(11,"User ID *"),n(),d(12,"input",82),u(13,ke,2,1,"div",59),n(),i(14,"div")(15,"label",57),l(16,"Select Role *"),n(),i(17,"select",83)(18,"option",84),l(19,"Choose a role"),n(),u(20,Oe,2,2,"option",85),p(21,"async"),n(),u(22,Ve,2,1,"div",59),n()(),i(23,"div",65)(24,"button",66),_("click",function(){v(e);let a=m();return h(a.toggleAssignForm())}),l(25," Cancel "),n(),i(26,"button",86),p(27,"async"),u(28,Pe,2,0,"svg",68),p(29,"async"),x(),i(30,"svg",87),d(31,"path",88),n(),l(32),p(33,"async"),n()()()()}if(t&2){let e=m();o(7),c("formGroup",e.assignRoleForm),o(6),c("ngIf",e.getFieldError(e.assignRoleForm,"userId")),o(7),c("ngForOf",g(21,8,e.activeRoles$))("ngForTrackBy",e.trackByRoleId),o(2),c("ngIf",e.getFieldError(e.assignRoleForm,"roleId")),o(4),c("disabled",!e.isAssignFormValid||g(27,10,e.assigning$)),o(2),c("ngIf",g(29,12,e.assigning$)),o(4),f(" ",g(33,14,e.assigning$)?"Assigning...":"Assign Role"," ")}}function $e(t,r){t&1&&(j(0),x(),i(1,"svg",90),d(2,"circle",91)(3,"path",92),n(),D())}function Be(t,r){t&1&&(x(),i(0,"svg",93),d(1,"path",94),n())}function Ae(t,r){t&1&&(i(0,"div",95)(1,"div",96),x(),i(2,"svg",97),d(3,"path",98),n(),y(),i(4,"span"),l(5,"Loading roles..."),n()()())}function Le(t,r){if(t&1&&(i(0,"div",99),d(1,"app-icon",100),i(2,"h3",101),l(3,"No roles found"),n(),i(4,"p",102),l(5),n()()),t&2){let e=m();o(5),f(" ",e.searchTerm?"No roles match your search criteria. Try adjusting your search terms.":"Get started by creating your first role."," ")}}function ze(t,r){if(t&1&&(i(0,"span",124),l(1),p(2,"titlecase"),n()),t&2){let e=r.$implicit;o(),f(" ",g(2,1,e.replace("_"," "))," ")}}function Ge(t,r){if(t&1&&(i(0,"span",125),l(1),n()),t&2){let e=m().$implicit;o(),f(" +",e.permissions.length-3," more ")}}function Ne(t,r){if(t&1){let e=R();i(0,"div",110)(1,"div",111)(2,"div",105)(3,"div",112),l(4),n(),i(5,"div",113),l(6),n()(),i(7,"div",106)(8,"div",114),l(9),n()(),i(10,"div",105)(11,"div",115),u(12,ze,3,3,"span",116)(13,Ge,2,1,"span",117),n()(),i(14,"div",107)(15,"span",118),l(16),n()(),i(17,"div",107)(18,"div",119)(19,"button",120),_("click",function(){let a=v(e).$implicit,w=m(2);return h(w.loadRoleById(a._id))}),d(20,"app-icon",121),n(),i(21,"button",122),_("click",function(){let a=v(e).$implicit,w=m(2);return h(w.selectRoleForAssign(a))}),x(),i(22,"svg",123),d(23,"path",88),n()()()()()()}if(t&2){let e=r.$implicit;o(4),E(e.name),o(2),f("ID: ",e._id,""),o(3),f(" ",e.description||"No description provided"," "),o(3),c("ngForOf",e.permissions.slice(0,3)),o(),c("ngIf",e.permissions.length>3),o(2),P(e.isActive!==!1?"bg-green-900/50 text-green-300 border-green-700":"bg-red-900/50 text-red-300 border-red-700"),o(),f(" ",e.isActive!==!1?"Active":"Inactive"," ")}}function je(t,r){if(t&1&&(i(0,"div")(1,"div",103)(2,"div",104)(3,"div",105),l(4,"Role Name"),n(),i(5,"div",106),l(6,"Description"),n(),i(7,"div",105),l(8,"Permissions"),n(),i(9,"div",107),l(10,"Status"),n(),i(11,"div",107),l(12,"Actions"),n()()(),i(13,"div",108),u(14,Ne,24,8,"div",109),n()()),t&2){let e=m();o(14),c("ngForOf",e.filteredRoles)("ngForTrackBy",e.trackByRoleId)}}var fe=class t{constructor(r,e){this.fb=r;this.store=e;this.initializeForms(),this.initializeObservables()}destroy$=new G;createRoleForm;assignRoleForm;roles$;activeRoles$;selectedRole$;loading$;creating$;assigning$;error$;successMessage$;rolesCount$;anyLoading$;showCreateForm=!1;showAssignForm=!1;searchTerm="";filteredRoles=[];selectedRoleForAssign=null;availablePermissions=["read_users","write_users","delete_users","read_roles","write_roles","delete_roles","read_reports","write_reports","admin_access","manage_settings"];ngOnInit(){this.loadRoles(),this.setupFormSubscriptions(),this.subscribeToRoles(),this.clearMessages()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initializeForms(){this.createRoleForm=this.fb.group({name:["",[C.required,C.minLength(2),C.maxLength(50)]],description:["",[C.maxLength(255)]],permissions:[[],[C.required,C.minLength(1)]]}),this.assignRoleForm=this.fb.group({userId:["",[C.required]],roleId:["",[C.required]]})}initializeObservables(){this.roles$=this.store.select(I),this.activeRoles$=this.store.select(z),this.selectedRole$=this.store.select(he),this.loading$=this.store.select(T),this.creating$=this.store.select($),this.assigning$=this.store.select(B),this.error$=this.store.select(A),this.successMessage$=this.store.select(L),this.rolesCount$=this.store.select(xe),this.anyLoading$=this.store.select(_e)}setupFormSubscriptions(){this.createRoleForm.valueChanges.pipe(M(this.destroy$),O(300)).subscribe(()=>{this.clearMessages()}),this.assignRoleForm.valueChanges.pipe(M(this.destroy$),O(300)).subscribe(()=>{this.clearMessages()})}subscribeToRoles(){this.roles$.pipe(M(this.destroy$)).subscribe(r=>{this.filteredRoles=this.filterRoles(r)})}filterRoles(r){if(!this.searchTerm.trim())return r;let e=this.searchTerm.toLowerCase();return r.filter(s=>s.name.toLowerCase().includes(e)||s.description?.toLowerCase().includes(e)||s.permissions.some(a=>a.toLowerCase().includes(e)))}loadRoles(){this.store.dispatch(S.loadRoles())}loadRoleById(r){this.store.dispatch(S.loadRoleById({roleId:r}))}createRole(){if(this.createRoleForm.valid){let r={name:this.createRoleForm.value.name,description:this.createRoleForm.value.description,permissions:this.createRoleForm.value.permissions};this.store.dispatch(S.createRole({roleData:r})),this.successMessage$.pipe(M(this.destroy$)).subscribe(e=>{e&&(this.showCreateForm=!1,this.createRoleForm.reset(),this.createRoleForm.patchValue({permissions:[]}))})}}assignRole(){if(this.assignRoleForm.valid){let r={userId:this.assignRoleForm.value.userId,roleId:this.assignRoleForm.value.roleId};this.store.dispatch(S.assignRoleToUser({assignData:r})),this.successMessage$.pipe(M(this.destroy$)).subscribe(e=>{e&&(this.showAssignForm=!1,this.assignRoleForm.reset(),this.selectedRoleForAssign=null)})}}toggleCreateForm(){this.showCreateForm=!this.showCreateForm,this.showCreateForm||(this.createRoleForm.reset(),this.createRoleForm.patchValue({permissions:[]})),this.clearMessages()}toggleAssignForm(){this.showAssignForm=!this.showAssignForm,this.showAssignForm||(this.assignRoleForm.reset(),this.selectedRoleForAssign=null),this.clearMessages()}onSearchChange(){this.roles$.pipe(M(this.destroy$)).subscribe(r=>{this.filteredRoles=this.filterRoles(r)})}selectRoleForAssign(r){this.selectedRoleForAssign=r,this.assignRoleForm.patchValue({roleId:r._id})}togglePermission(r){let e=this.createRoleForm.value.permissions||[],s=e.indexOf(r);s>-1?e.splice(s,1):e.push(r),this.createRoleForm.patchValue({permissions:e})}isPermissionSelected(r){return(this.createRoleForm.value.permissions||[]).includes(r)}clearMessages(){this.store.dispatch(S.clearError()),this.store.dispatch(S.clearSuccessMessage())}resetState(){this.store.dispatch(S.resetRoleState()),this.showCreateForm=!1,this.showAssignForm=!1,this.createRoleForm.reset(),this.assignRoleForm.reset(),this.selectedRoleForAssign=null,this.searchTerm=""}get isCreateFormValid(){return this.createRoleForm.valid}get isAssignFormValid(){return this.assignRoleForm.valid}getFieldError(r,e){let s=r.get(e);if(s&&s.invalid&&(s.dirty||s.touched)){let a=s.errors;if(a){if(a.required)return`${e} is required`;if(a.minlength)return`${e} must be at least ${a.minlength.requiredLength} characters`;if(a.maxlength)return`${e} cannot exceed ${a.maxlength.requiredLength} characters`}}return null}trackByRoleId(r,e){return e._id||r.toString()}static \u0275fac=function(e){return new(e||t)(V(ge),V(te))};static \u0275cmp=N({type:t,selectors:[["app-manage-role"]],decls:57,vars:37,consts:[["refreshIcon",""],[1,"min-h-screen","bg-slate-900","text-gray-100"],[1,"bg-slate-800","border-b","border-slate-700","px-6","py-4"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-semibold","text-white"],[1,"text-gray-400","text-sm","mt-1"],[1,"flex","items-center","space-x-3"],[1,"bg-slate-700","px-3","py-1","rounded-full","text-sm"],[1,"text-gray-300"],[1,"text-purple-400","font-medium","ml-1"],[1,"bg-purple-600","hover:bg-purple-700","text-white","flex","px-4","py-2","rounded-lg","transition-colors","duration-200","font-medium",3,"click","disabled"],[1,"bg-blue-600","hover:bg-blue-700","flex","text-white","px-4","py-2","rounded-lg","transition-colors","duration-200","font-medium",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 640 512","fill","currentColor","width","1em","height","1em",1,"mr-2"],["d","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm51.2 48h-17.8c-22.2 10.2-46.8 16-72.4 16s-50.2-5.8-72.4-16h-17.8C42.7 304 0 346.7 0 400v32c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-32c0-53.3-42.7-96-94.8-96H275.2zM616 208h-56v-56c0-13.3-10.7-24-24-24s-24 10.7-24 24v56h-56c-13.3 0-24 10.7-24 24s10.7 24 24 24h56v56c0 13.3 10.7 24 24 24s24-10.7 24-24v-56h56c13.3 0 24-10.7 24-24s-10.7-24-24-24z"],["class","px-6 py-4",4,"ngIf"],[1,"px-6","py-4"],["class","bg-slate-800 rounded-lg border border-slate-700 p-6 mb-6",4,"ngIf"],[1,"bg-slate-800","rounded-lg","border","border-slate-700","p-4","mb-6"],[1,"flex","items-center","space-x-4"],[1,"relative","flex-1"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 512 512","fill","currentColor","width","1em","height","1em",1,"absolute","left-3","top-1/2","transform","-translate-y-1/2","text-gray-400"],["d","M505 442.7L405.3 343c28.4-34.9 45.7-79 45.7-127C451 103.5 349.5 2 225.5 2S0 103.5 0 225.5 101.5 449 225.5 449c48 0 92.1-17.3 127-45.7l99.7 99.7c4.5 4.5 10.6 7 17 7s12.5-2.5 17-7c9.4-9.4 9.4-24.6 0-34zM225.5 385c-88.1 0-159.5-71.4-159.5-159.5S137.4 66 225.5 66 385 137.4 385 225.5 313.6 385 225.5 385z"],["type","text","placeholder","Search roles by name, description, or permissions...",1,"w-full","bg-slate-700","border","border-slate-600","rounded-lg","pl-10","pr-4","py-3","text-white","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-transparent",3,"ngModelChange","input","ngModel"],[1,"bg-slate-700","hover:bg-slate-600","border","border-slate-600","text-gray-300","px-4","py-3","rounded-lg","transition-colors","duration-200","flex","items-center",3,"click","disabled"],[4,"ngIf","ngIfElse"],[1,"bg-slate-800","rounded-lg","border","border-slate-700","overflow-hidden"],["class","flex items-center justify-center py-12",4,"ngIf"],["class","flex flex-col items-center justify-center py-12",4,"ngIf"],[4,"ngIf"],[1,"flex","items-center","justify-between","pt-6"],[1,"text-sm","text-gray-400"],[1,"bg-slate-700","hover:bg-slate-600","border","border-slate-600","text-gray-300","px-4","py-2","rounded-lg","transition-colors","duration-200","flex","items-center",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 512 512","fill","currentColor","width","24","height","24","aria-hidden","true",2,"margin-right","0.5rem"],["d","M255.545 8c-66.269 0-127.496 33.573-163.37 87.259l-37.468-37.468C45.01 52.755 36.727 50.936 29.51 54.555c-7.217 3.62-11.725 11.81-11.725 20.604v128c0 12.15 14.41 19.474 23.78 10.103L79.558 134.87c27.057-27.058 64.54-42.288 102.237-42.288 77.408 0 140.28 62.873 140.28 140.28 0 10.69-1.02 21.34-3.034 31.616-3.02 15.42 18.78 20.87 21.8 5.45 2.62-13.38 3.94-27.18 3.94-41.07 0-97.047-79.03-176.077-176.078-176.077z"],["class","bg-red-900/50 border border-red-700 text-red-200 px-4 py-3 rounded-lg mb-4 flex items-center justify-between",4,"ngIf"],["class","bg-green-900/50 border border-green-700 text-green-200 px-4 py-3 rounded-lg mb-4 flex items-center justify-between",4,"ngIf"],[1,"bg-red-900/50","border","border-red-700","text-red-200","px-4","py-3","rounded-lg","mb-4","flex","items-center","justify-between"],[1,"flex","items-center"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 576 512","fill","currentColor","width","1em","height","1em",1,"mr-3","text-red-400"],["d","M569.5 440.6 327.4 40.6c-18.3-30.4-60.5-30.4-78.8 0L6.5 440.6C-12 471.6 10.9 512 48 512h480c37.1 0 60-40.4 41.5-71.4zM288 176c13.3 0 24 10.7 24 24v80c0 13.3-10.7 24-24 24s-24-10.7-24-24v-80c0-13.3 10.7-24 24-24zm0 208c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"],[1,"font-medium"],[1,"text-sm","text-red-300"],[1,"text-red-400","hover:text-red-300",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 352 512","fill","currentColor","width","1em","height","1em"],["d","M242.7 256L346.5 152.2c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L197.5 210.7 93.7 106.9c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L152.7 256 48.9 359.8c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L197.5 301.3l103.8 103.8c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L242.7 256z"],[1,"bg-green-900/50","border","border-green-700","text-green-200","px-4","py-3","rounded-lg","mb-4","flex","items-center","justify-between"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 512 512","fill","#4ade80","width","24","height","24","aria-hidden","true",2,"margin-right","0.75rem"],["d","M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zm-277.9 93.7l184-184c6.2-6.2 6.2-16.4 0-22.6l-22.6-22.6c-6.2-6.2-16.4-6.2-22.6 0L216 284.7l-70.1-70.1c-6.2-6.2-16.4-6.2-22.6 0l-22.6 22.6c-6.2 6.2-6.2 16.4 0 22.6l104 104c6.3 6.3 16.4 6.3 22.6 0z"],[1,"text-sm","text-green-300"],[1,"text-green-400","hover:text-green-300",3,"click"],[1,"bg-slate-800","rounded-lg","border","border-slate-700","p-6","mb-6"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-xl","font-semibold","text-white"],[1,"text-gray-400","hover:text-gray-300",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 352 512","fill","currentColor","width","1em","height","1em",1,"text-lg"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"block","text-sm","font-medium","text-gray-300","mb-2"],["type","text","formControlName","name","placeholder","Enter role name",1,"w-full","bg-slate-700","border","border-slate-600","rounded-lg","px-4","py-3","text-white","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-transparent"],["class","text-red-400 text-sm mt-1",4,"ngIf"],["type","text","formControlName","description","placeholder","Enter role description",1,"w-full","bg-slate-700","border","border-slate-600","rounded-lg","px-4","py-3","text-white","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-purple-500","focus:border-transparent"],[1,"block","text-sm","font-medium","text-gray-300","mb-3"],[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-5","gap-3"],["class","flex items-center",4,"ngFor","ngForOf"],["class","text-red-400 text-sm mt-2",4,"ngIf"],[1,"flex","items-center","justify-end","space-x-4","pt-4","border-t","border-slate-700"],["type","button",1,"px-6","py-2","text-gray-400","hover:text-gray-300","font-medium","transition-colors","duration-200",3,"click"],["type","submit",1,"bg-purple-600","hover:bg-purple-700","disabled:bg-slate-600","disabled:cursor-not-allowed","text-white","px-6","py-2","rounded-lg","font-medium","transition-colors","duration-200","flex","items-center",3,"disabled"],["class","mr-2 animate-spin","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 448 512","fill","currentColor","width","24","height","24","aria-hidden","true",2,"margin-right","0.5rem"],["d","M432 256c0 13.3-10.7 24-24 24h-136v136c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V280H40c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h136V64c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v136h136c13.3 0 24 10.7 24 24v32z"],[1,"text-red-400","text-sm","mt-1"],[1,"relative"],["type","checkbox",1,"sr-only",3,"change","id","checked"],[1,"w-5","h-5","border-2","rounded","cursor-pointer","flex","items-center","justify-center","transition-colors","duration-200",3,"click"],["class","text-white text-xs","width","12","height","12","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round",4,"ngIf"],[1,"ml-3","text-sm","text-gray-300","cursor-pointer",3,"for"],["width","12","height","12","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round",1,"text-white","text-xs"],["d","M20 6L9 17l-5-5"],[1,"text-red-400","text-sm","mt-2"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"mr-2","animate-spin"],["d","M21 12a9 9 0 11-6.219-8.56"],["type","text","formControlName","userId","placeholder","Enter user ID",1,"w-full","bg-slate-700","border","border-slate-600","rounded-lg","px-4","py-3","text-white","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],["formControlName","roleId",1,"w-full","bg-slate-700","border","border-slate-600","rounded-lg","px-4","py-3","text-white","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],["value",""],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["type","submit",1,"bg-blue-600","hover:bg-blue-700","disabled:bg-slate-600","disabled:cursor-not-allowed","text-white","px-6","py-2","rounded-lg","font-medium","transition-colors","duration-200","flex","items-center",3,"disabled"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 640 512","fill","currentColor","width","24","height","24","aria-hidden","true",2,"margin-right","0.5rem"],["d","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm89.6 32h-11.2c-22.2 10.6-46.7 16-72.4 16s-50.2-5.4-72.4-16h-11.2C60.3 288 0 348.3 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.1-60.3-134.4-134.4-134.4zM624 176v32c0 8.8-7.2 16-16 16h-48v48c0 8.8-7.2 16-16 16h-32c-8.8 0-16-7.2-16-16v-48h-48c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h48v-48c0-8.8 7.2-16 16-16h32c8.8 0 16 7.2 16 16v48h48c8.8 0 16 7.2 16 16z"],[3,"value"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"mr-2","animate-spin","h-5","w-5","text-gray-300"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z",1,"opacity-75"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 512 512","fill","currentColor",1,"mr-2","h-5","w-5","text-gray-300"],["d","M500.33 93.7c-12.5-12.5-32.76-12.5-45.26 0l-34.01 34.01C384.03 78.72 315.25 48 240 48 119.03 48 20.13 143.65 16.1 263.53c-.64 18.39 14.45 33.68 32.85 33.68h.04c18.03 0 32.61-14.34 33.14-32.35C85.29 180.32 154.76 112 240 112c57.62 0 109.12 30.22 138.51 76.1l-39.18 39.18c-20.02 20.02-5.84 54.1 22.4 54.1H480c17.67 0 32-14.33 32-32V116.1c0-28.26-34.08-42.42-54.1-22.4l-34.01 34.01z"],[1,"flex","items-center","justify-center","py-12"],[1,"flex","items-center","text-gray-400"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 512 512","fill","currentColor",1,"spinner-spin",2,"margin-right","0.75rem","width","1.125rem","height","1.125rem"],["d","M304 48c0-26.5-21.5-48-48-48S208 21.5 208 48c0 26.5 21.5 48 48 48zm0 80c0-26.5-21.5-48-48-48S208 101.5 208 128c0 26.5 21.5 48 48 48zm0 80c0-26.5-21.5-48-48-48S208 181.5 208 208c0 26.5 21.5 48 48 48zm0 80c0-26.5-21.5-48-48-48S208 261.5 208 288c0 26.5 21.5 48 48 48z"],[1,"flex","flex-col","items-center","justify-center","py-12"],["iconName","emptyStateIcon"],[1,"text-lg","font-medium","text-gray-400","mb-2"],[1,"text-gray-500","text-center","max-w-md"],[1,"bg-slate-700","px-6","py-4","border-b","border-slate-600"],[1,"grid","grid-cols-12","gap-4","text-sm","font-medium","text-gray-300"],[1,"col-span-3"],[1,"col-span-4"],[1,"col-span-1"],[1,"divide-y","divide-slate-700"],["class","px-6 py-4 hover:bg-slate-700/50 transition-colors duration-200",4,"ngFor","ngForOf","ngForTrackBy"],[1,"px-6","py-4","hover:bg-slate-700/50","transition-colors","duration-200"],[1,"grid","grid-cols-12","gap-4","items-center"],[1,"font-medium","text-white"],[1,"text-xs","text-gray-500","mt-1"],[1,"text-gray-300","text-sm"],[1,"flex","flex-wrap","gap-1"],["class","bg-purple-900/50 text-purple-300 text-xs px-2 py-1 rounded",4,"ngFor","ngForOf"],["class","bg-slate-600 text-gray-300 text-xs px-2 py-1 rounded",4,"ngIf"],[1,"px-2","py-1","text-xs","rounded","border"],[1,"flex","items-center","space-x-2"],["title","View Details",1,"text-blue-400","hover:text-blue-300","transition-colors","duration-200",3,"click"],["iconName","viewIcon"],["title","Assign Role",1,"text-green-400","hover:text-green-300","transition-colors","duration-200",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 640 512","fill","currentColor","width","36","height","36","aria-hidden","true"],[1,"bg-purple-900/50","text-purple-300","text-xs","px-2","py-1","rounded"],[1,"bg-slate-600","text-gray-300","text-xs","px-2","py-1","rounded"]],template:function(e,s){if(e&1){let a=R();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"h1",4),l(5,"Role Management"),n(),i(6,"p",5),l(7," Manage user roles and permissions "),n()(),i(8,"div",6)(9,"div",7)(10,"span",8),l(11,"Total Roles:"),n(),i(12,"span",9),l(13),p(14,"async"),n()(),i(15,"button",10),p(16,"async"),_("click",function(){return v(a),h(s.toggleCreateForm())}),l(17," New Role "),n(),i(18,"button",11),p(19,"async"),_("click",function(){return v(a),h(s.toggleAssignForm())}),x(),i(20,"svg",12),d(21,"path",13),n(),l(22," Assign Role "),n()()()(),u(23,Ce,5,6,"div",14),p(24,"async"),p(25,"async"),y(),i(26,"div",15),u(27,Ie,36,14,"div",16)(28,Te,34,16,"div",16),i(29,"div",17)(30,"div",18)(31,"div",19),x(),i(32,"svg",20),d(33,"path",21),n(),y(),i(34,"input",22),Y("ngModelChange",function(k){return v(a),W(s.searchTerm,k)||(s.searchTerm=k),h(k)}),_("input",function(){return v(a),h(s.onSearchChange())}),n()(),i(35,"button",23),p(36,"async"),_("click",function(){return v(a),h(s.loadRoles())}),u(37,$e,4,0,"ng-container",24),p(38,"async"),u(39,Be,2,0,"ng-template",null,0,J),l(41," Refresh "),n()()(),i(42,"div",25),u(43,Ae,6,0,"div",26),p(44,"async"),u(45,Le,6,1,"div",27),p(46,"async"),u(47,je,15,2,"div",28),p(48,"async"),n(),i(49,"div",29)(50,"div",30),l(51),p(52,"async"),n(),i(53,"button",31),_("click",function(){return v(a),h(s.resetState())}),x(),i(54,"svg",32),d(55,"path",33),n(),l(56," Reset All "),n()()()()}if(e&2){let a=H(40);o(13),E(g(14,15,s.rolesCount$)||0),o(2),c("disabled",g(16,17,s.anyLoading$)),o(3),c("disabled",g(19,19,s.anyLoading$)),o(5),c("ngIf",g(24,21,s.error$)||g(25,23,s.successMessage$)),o(4),c("ngIf",s.showCreateForm),o(),c("ngIf",s.showAssignForm),o(6),U("ngModel",s.searchTerm),o(),c("disabled",g(36,25,s.loading$)),o(2),c("ngIf",g(38,27,s.loading$))("ngIfElse",a),o(6),c("ngIf",g(44,29,s.loading$)),o(2),c("ngIf",!g(46,31,s.loading$)&&s.filteredRoles.length===0),o(2),c("ngIf",!g(48,33,s.loading$)&&s.filteredRoles.length>0),o(4),q(" Showing ",s.filteredRoles.length," of ",g(52,35,s.rolesCount$)||0," roles ")}},dependencies:[ee,K,Q,X,Z,ve,le,me,pe,ne,de,re,oe,ae,ce,ue,se,ie],styles:['@charset "UTF-8";.manage-role-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.manage-role-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#334155;border-radius:4px}.manage-role-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#64748b;border-radius:4px}.manage-role-container[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#475569}.spinner-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spinner-rotate 1s linear infinite}@keyframes _ngcontent-%COMP%_spinner-rotate{to{transform:rotate(360deg)}}.form-slide-enter[_ngcontent-%COMP%]{transform:translateY(-10px);opacity:0;animation:_ngcontent-%COMP%_slideIn .3s ease-out forwards}@keyframes _ngcontent-%COMP%_slideIn{to{transform:translateY(0);opacity:1}}.custom-checkbox[_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;-moz-appearance:none}.custom-checkbox[_ngcontent-%COMP%]:checked{background-color:#7c3aed;border-color:#7c3aed}.custom-checkbox[_ngcontent-%COMP%]:checked:after{content:"\\2713";color:#fff;font-size:12px;font-weight:700;display:flex;align-items:center;justify-content:center;height:100%}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.role-card[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.role-card[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 10px 25px #0000004d}.permission-badge[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.permission-badge[_ngcontent-%COMP%]:hover{transform:scale(1.05);opacity:.8}.form-input[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.form-input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #7c3aed1a}.form-input.error[_ngcontent-%COMP%]{border-color:#ef4444;box-shadow:0 0 0 3px #ef44441a}.btn-hover[_ngcontent-%COMP%]{position:relative;overflow:hidden}.btn-hover[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.1),transparent);transition:left .5s}.btn-hover[_ngcontent-%COMP%]:hover:before{left:100%}.alert-enter[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_alertSlideIn .3s ease-out}@keyframes _ngcontent-%COMP%_alertSlideIn{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}.table-row[_ngcontent-%COMP%]{transition:background-color .2s ease-in-out}.table-row[_ngcontent-%COMP%]:hover{background-color:#33415580}.table-row[_ngcontent-%COMP%]:hover   .action-button[_ngcontent-%COMP%]{opacity:1;transform:scale(1)}.action-button[_ngcontent-%COMP%]{opacity:.7;transform:scale(.95);transition:all .2s ease-in-out}.action-button[_ngcontent-%COMP%]:hover{opacity:1;transform:scale(1.1)}.empty-state[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transition:transform .3s ease-in-out}.empty-state[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:hover{transform:scale(1.1) rotate(5deg)}.search-input-container[_ngcontent-%COMP%]{position:relative}.search-input-container[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{pointer-events:none;transition:color .2s ease-in-out}.search-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + .search-icon[_ngcontent-%COMP%]{color:#7c3aed}.status-active[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.8}}@media (max-width: 768px){.role-grid[_ngcontent-%COMP%], .form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.header-actions[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}@media print{.no-print[_ngcontent-%COMP%]{display:none!important}.print-break[_ngcontent-%COMP%]{page-break-after:always}}']})};export{fe as ManageRoleComponent};
