import{e as q,f as H,g as J,h as K,i as Q,j as R,k as X,l as Y}from"./chunk-ZMJW5JPU.js";import{a as W}from"./chunk-UZE7R2MP.js";import{a as G}from"./chunk-WLTH2OZR.js";import{p as z}from"./chunk-TYWYGKBN.js";import"./chunk-PZKXZ6XN.js";import{k as D,l as j,n as L,r as U}from"./chunk-E3YMVHEH.js";import{Bc as x,Cb as h,Cc as v,Nb as c,Ob as A,Qb as S,Xb as i,Yb as n,Zb as u,ac as T,ba as V,da as k,dc as b,ec as m,j as N,k as w,mb as s,oa as O,oc as a,pc as C,qc as f,sc as F,v as I,w as E,xa as _,xb as B,ya as y}from"./chunk-VJULP7QK.js";function ee(l,t){l&1&&(i(0,"div",26),u(1,"div",27),i(2,"span",28),a(3,"Loading subscribers..."),n()())}function te(l,t){if(l&1&&(i(0,"div",29)(1,"div",30),u(2,"app-icon",31),i(3,"p",32),a(4),n()()()),l&2){let e=t.ngIf;s(4),f("Error loading subscribers: ",e,"")}}function ie(l,t){if(l&1&&(i(0,"option",52),a(1),n()),l&2){let e=t.$implicit;c("value",e),s(),f(" ",e," ")}}function ne(l,t){if(l&1&&(i(0,"div",36),a(1),n()),l&2){let e=t.ngIf;s(),F(" Showing ",e.startIndex,"-",e.endIndex," of ",e.totalItems," results ")}}function re(l,t){if(l&1&&(i(0,"tr",53)(1,"td",54)(2,"div",30)(3,"div",55)(4,"div",56)(5,"span",57),a(6),n()()(),i(7,"div",58)(8,"div",59),a(9),n()()()(),i(10,"td",54)(11,"span",60),a(12),n()(),i(13,"td",61),a(14),n(),i(15,"td",62)(16,"div",63)(17,"button",64),u(18,"app-icon",65),n(),i(19,"button",66),u(20,"app-icon",67),n()()()()),l&2){let e=t.$implicit,r=t.index,o=m(2);A("animation-delay",r*50+"ms"),s(6),f(" ",e.email.charAt(0).toUpperCase()," "),s(3),f(" ",e.email," "),s(2),S(e.isConfirmed?"bg-green-500/20 text-green-400 border border-green-500/30 shadow-green-500/20":"bg-yellow-500/20 text-yellow-400 border border-yellow-500/30 shadow-yellow-500/20"),s(),f(" ",e.isConfirmed?"Confirmed":"Pending"," "),s(2),f(" ",o.formatDate(e.createdAt)," ")}}function ae(l,t){if(l&1&&(i(0,"tr")(1,"td",68),u(2,"app-icon",69),i(3,"h3",70),a(4," No subscribers found "),n(),i(5,"p",71),a(6),n()()()),l&2){let e=m(2);s(6),f(" ",e.searchTerm||e.filterType!=="all"?"Try adjusting your search or filters.":"Get started by adding your first subscriber."," ")}}function oe(l,t){if(l&1){let e=T();i(0,"button",83),b("click",function(){let o=_(e).$implicit,d=m(3);return y(d.onPageChange(o))}),a(1),n()}if(l&2){let e=t.$implicit,r=m().ngIf;S(e===r.currentPage?"bg-blue-600 text-white border-blue-500 shadow-lg shadow-blue-500/25 z-10":"bg-slate-600 text-gray-300 hover:bg-slate-500 hover:text-white border-slate-500 hover:shadow-lg hover:shadow-blue-500/10"),s(),f(" ",e," ")}}function se(l,t){if(l&1){let e=T();i(0,"div",72)(1,"div",5)(2,"div",73)(3,"button",74),b("click",function(){_(e);let o=m(2);return y(o.onPreviousPage())}),u(4,"app-icon",75),a(5," Previous "),n(),i(6,"button",74),b("click",function(){_(e);let o=m(2);return y(o.onNextPage())}),a(7," Next "),u(8,"app-icon",76),n()(),i(9,"div",77)(10,"div")(11,"p",36),a(12," Showing "),i(13,"span",78),a(14),n(),a(15," to "),i(16,"span",78),a(17),n(),a(18," of "),i(19,"span",78),a(20),n(),a(21," results "),n()(),i(22,"div")(23,"nav",79)(24,"button",80),b("click",function(){_(e);let o=m(2);return y(o.onPreviousPage())}),u(25,"app-icon",75),n(),h(26,oe,2,3,"button",81),i(27,"button",82),b("click",function(){_(e);let o=m(2);return y(o.onNextPage())}),u(28,"app-icon",76),n()()()()()()}if(l&2){let e=t.ngIf,r=m(2);s(3),S(e.currentPage===1?"bg-slate-700 text-gray-400":"bg-slate-600 text-white hover:bg-slate-500 shadow-lg"),c("disabled",e.currentPage===1),s(3),S(e.currentPage===e.totalPages?"bg-slate-700 text-gray-400":"bg-slate-600 text-white hover:bg-slate-500 shadow-lg"),c("disabled",e.currentPage===e.totalPages),s(8),C(e.startIndex),s(3),C(e.endIndex),s(3),C(e.totalItems),s(4),S(e.currentPage===1?"bg-slate-700 text-gray-400 border border-slate-600":"bg-slate-600 text-white hover:bg-slate-500 border border-slate-500 hover:shadow-lg hover:shadow-blue-500/20"),c("disabled",e.currentPage===1),s(2),c("ngForOf",r.getVisiblePages(e.totalPages)),s(),S(e.currentPage===e.totalPages?"bg-slate-700 text-gray-400 border border-slate-600":"bg-slate-600 text-white hover:bg-slate-500 border border-slate-500 hover:shadow-lg hover:shadow-blue-500/20"),c("disabled",e.currentPage===e.totalPages)}}function le(l,t){if(l&1&&(i(0,"div",84),u(1,"app-icon",69),i(2,"h3",70),a(3,"No subscribers found"),n(),i(4,"p",71),a(5),n()()),l&2){let e=m(2);s(5),f(" ",e.searchTerm||e.filterType!=="all"?"Try adjusting your search or filters.":"Get started by adding your first subscriber."," ")}}function de(l,t){if(l&1){let e=T();i(0,"div",33)(1,"div",34)(2,"div",5)(3,"div",35)(4,"label",36),a(5,"Show:"),n(),i(6,"select",37),b("change",function(o){_(e);let d=m();return y(d.onItemsPerPageChange(o))}),h(7,ie,2,2,"option",38),n(),i(8,"span",36),a(9,"entries"),n()(),h(10,ne,2,3,"div",39),x(11,"async"),n()(),i(12,"div",40)(13,"table",41)(14,"thead",42)(15,"tr")(16,"th",43),b("click",function(){_(e);let o=m();return y(o.onSortChange("email"))}),i(17,"div",44)(18,"span"),a(19,"Email"),n(),i(20,"span",45),a(21),n()()(),i(22,"th",43),b("click",function(){_(e);let o=m();return y(o.onSortChange("isConfirmed"))}),i(23,"div",44)(24,"span"),a(25,"Status"),n(),i(26,"span",45),a(27),n()()(),i(28,"th",43),b("click",function(){_(e);let o=m();return y(o.onSortChange("createdAt"))}),i(29,"div",44)(30,"span"),a(31,"Subscribed"),n(),i(32,"span",45),a(33),n()()(),i(34,"th",46),a(35," Actions "),n()()(),i(36,"tbody",47),h(37,re,21,8,"tr",48),x(38,"async"),h(39,ae,7,1,"tr",49),x(40,"async"),n()()(),h(41,se,29,16,"div",50),x(42,"async"),h(43,le,6,1,"div",51),x(44,"async"),n()}if(l&2){let e=m();s(6),c("value",e.itemsPerPage),s(),c("ngForOf",e.itemsPerPageOptions),s(3),c("ngIf",v(11,11,e.paginationInfo$)),s(11),C(e.getSortIcon("email")),s(6),C(e.getSortIcon("isConfirmed")),s(6),C(e.getSortIcon("createdAt")),s(4),c("ngForOf",v(38,13,e.paginatedSubscribers$))("ngForTrackBy",e.trackByEmail),s(2),c("ngIf",v(40,15,e.hasNoSubscribers$)),s(2),c("ngIf",v(42,17,e.paginationInfo$)),s(2),c("ngIf",v(44,19,e.hasNoSubscribers$))}}var Z=class l{store=O(z);destroy$=new N;subscribers$=this.store.select(q).pipe(I(t=>t||[]));loading$=this.store.select(H);error$=this.store.select(J);confirmedSubscribers$=this.store.select(K);unconfirmedSubscribers$=this.store.select(Q);totalCount$=this.store.select(R);confirmedCount$=this.store.select(X);unconfirmedCount$=this.store.select(Y);itemsPerPage=10;itemsPerPageOptions=[5,10,25,50,100];searchTerm$=new w("");filterType$=new w("all");sortBy$=new w("createdAt");sortOrder$=new w("desc");currentPage$=new w(1);itemsPerPage$=new w(10);get searchTerm(){return this.searchTerm$.value}get filterType(){return this.filterType$.value}get sortBy(){return this.sortBy$.value}get sortOrder(){return this.sortOrder$.value}get currentPage(){return this.currentPage$.value}filteredSubscribers$=E([this.subscribers$,this.searchTerm$,this.filterType$,this.sortBy$,this.sortOrder$]).pipe(I(([t,e,r,o,d])=>this.getFilteredAndSortedSubscribers(t,e,r,o,d)));paginatedSubscribers$=E([this.filteredSubscribers$,this.currentPage$,this.itemsPerPage$]).pipe(I(([t,e,r])=>this.getPaginatedSubscribers(t,e,r)));paginationInfo$=E([this.filteredSubscribers$,this.currentPage$,this.itemsPerPage$]).pipe(I(([t,e,r])=>this.getPaginationInfo(t,e,r)));hasNoSubscribers$=this.filteredSubscribers$.pipe(I(t=>t.length===0));trackByEmail(t,e){return e.email}ngOnInit(){this.loadSubscribers(),E([this.searchTerm$,this.filterType$,this.itemsPerPage$]).pipe(k(this.destroy$),V([this.searchTerm,this.filterType,this.itemsPerPage])).subscribe(()=>{this.currentPage$.value!==1&&this.currentPage$.next(1)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadSubscribers(){this.store.dispatch(W.loadSubscribers())}onSearch(t){let e=t.target.value;this.searchTerm$.next(e)}onFilterChange(t){this.filterType$.next(t)}onSortChange(t){if(this.sortBy$.value===t){let e=this.sortOrder$.value==="asc"?"desc":"asc";this.sortOrder$.next(e)}else this.sortBy$.next(t),this.sortOrder$.next("asc")}onItemsPerPageChange(t){let e=parseInt(t.target.value,10);this.itemsPerPage$.next(e)}onPageChange(t){this.currentPage$.next(t)}onPreviousPage(){let t=this.currentPage$.value;t>1&&this.currentPage$.next(t-1)}onNextPage(){this.paginationInfo$.pipe(k(this.destroy$)).subscribe(t=>{let e=this.currentPage$.value;e<t.totalPages&&this.currentPage$.next(e+1)}).unsubscribe()}getFilteredAndSortedSubscribers(t,e,r,o,d){let g=[...t];return e&&(g=g.filter(p=>p.email.toLowerCase().includes(e.toLowerCase()))),r==="confirmed"?g=g.filter(p=>p.isConfirmed):r==="unconfirmed"&&(g=g.filter(p=>!p.isConfirmed)),g.sort((p,M)=>{let $,P;switch(o){case"email":$=p.email.toLowerCase(),P=M.email.toLowerCase();break;case"createdAt":$=new Date(p.createdAt||0).getTime(),P=new Date(M.createdAt||0).getTime();break;case"isConfirmed":$=p.isConfirmed,P=M.isConfirmed;break;default:return 0}return $<P?d==="asc"?-1:1:$>P?d==="asc"?1:-1:0}),g}getPaginatedSubscribers(t,e,r){let o=(e-1)*r,d=o+r;return t.slice(o,d)}getPaginationInfo(t,e,r){let o=t.length,d=Math.ceil(o/r),g=(e-1)*r+1,p=Math.min(g+r-1,o);return{currentPage:e,totalPages:d,totalItems:o,itemsPerPage:r,startIndex:o>0?g:0,endIndex:o>0?p:0}}getVisiblePages(t){let r=this.currentPage$.value;if(t<=5)return Array.from({length:t},(g,p)=>p+1);let o=Math.max(1,r-Math.floor(5/2)),d=Math.min(t,o+5-1);return d-o+1<5&&(o=Math.max(1,d-5+1)),Array.from({length:d-o+1},(g,p)=>o+p)}formatDate(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}getSortIcon(t){return this.sortBy$.value!==t?"\u2195\uFE0F":this.sortOrder$.value==="asc"?"\u2191":"\u2193"}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=B({type:l,selectors:[["app-manage-subscriber"]],decls:55,vars:27,consts:[[1,"mb-8"],[1,"text-3xl","font-bold","text-white","mb-2"],[1,"text-gray-400"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6","mb-8"],[1,"bg-slate-800","border","border-slate-700","rounded-lg","p-6"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-gray-400"],[1,"text-2xl","font-bold","text-white"],[1,"p-3","bg-blue-500/20","rounded-lg"],["iconName","totalCountIcon"],[1,"text-2xl","font-bold","text-green-400"],[1,"p-3","bg-green-500/20","rounded-lg"],["iconName","confirmedIcon"],[1,"text-2xl","font-bold","text-yellow-400"],[1,"p-3","bg-yellow-500/20","rounded-lg"],["iconName","unconfirmedIcon"],[1,"bg-slate-800","border","border-slate-700","rounded-lg","p-6","mb-6"],[1,"flex","flex-col","sm:flex-row","gap-4","items-start","sm:items-center","justify-between"],[1,"relative","flex-1","max-w-md"],["iconName","inputSearchIcon"],["type","text","placeholder","Search subscribers...",1,"w-full","pl-10","pr-4","py-2","bg-slate-700","border","border-slate-600","rounded-lg","text-white","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"input","value"],[1,"flex","gap-2"],[1,"px-4","py-2","rounded-lg","text-sm","font-medium","transition-colors",3,"click"],["class","flex items-center justify-center py-12",4,"ngIf"],["class","bg-red-500/20 border border-red-500/50 rounded-lg p-4 mb-6",4,"ngIf"],["class","bg-slate-800 border border-slate-700 rounded-lg overflow-hidden",4,"ngIf"],[1,"flex","items-center","justify-center","py-12"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-500"],[1,"ml-3","text-gray-400"],[1,"bg-red-500/20","border","border-red-500/50","rounded-lg","p-4","mb-6"],[1,"flex","items-center"],["iconName","errorLoadingIcon"],[1,"text-red-300"],[1,"bg-slate-800","border","border-slate-700","rounded-lg","overflow-hidden"],[1,"px-6","py-4","border-b","border-slate-700","bg-slate-750"],[1,"flex","items-center","space-x-2"],[1,"text-sm","text-gray-300"],[1,"bg-slate-700","border","border-slate-600","rounded-md","px-3","py-1","text-sm","text-white","focus:outline-none","focus:ring-2","focus:ring-blue-500","transition-all","duration-200",3,"change","value"],[3,"value",4,"ngFor","ngForOf"],["class","text-sm text-gray-300",4,"ngIf"],[1,"overflow-x-auto"],[1,"w-full"],[1,"bg-slate-700","border-b","border-slate-600"],[1,"px-6","py-4","text-left","text-xs","font-medium","text-gray-300","uppercase","tracking-wider","cursor-pointer","hover:bg-slate-600","transition-all","duration-200",3,"click"],[1,"flex","items-center","space-x-1"],[1,"text-gray-400","transition-transform","duration-200","hover:scale-110"],[1,"px-6","py-4","text-left","text-xs","font-medium","text-gray-300","uppercase","tracking-wider"],[1,"divide-y","divide-slate-700"],["class","hover:bg-slate-700/50 transition-all duration-200 transform hover:scale-[1.02] hover:shadow-lg",3,"animation-delay",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["class","px-6 py-4 border-t border-slate-700 bg-slate-750",4,"ngIf"],["class","text-center py-12",4,"ngIf"],[3,"value"],[1,"hover:bg-slate-700/50","transition-all","duration-200","transform","hover:scale-[1.02]","hover:shadow-lg"],[1,"px-6","py-4","whitespace-nowrap"],[1,"flex-shrink-0","h-10","w-10"],[1,"h-10","w-10","rounded-full","bg-gradient-to-r","from-blue-500","to-purple-600","flex","items-center","justify-center","shadow-lg","transform","transition-transform","duration-200","hover:scale-110"],[1,"text-white","text-sm","font-medium"],[1,"ml-4"],[1,"text-sm","font-medium","text-white"],[1,"inline-flex","px-2","py-1","text-xs","font-semibold","rounded-full","transition-all","duration-200","transform","hover:scale-105"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-300"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium"],[1,"flex","space-x-2"],[1,"text-blue-400","hover:text-blue-300","transition-all","duration-200","transform","hover:scale-110","p-1","rounded-md","hover:bg-blue-500/20"],["iconName","iconEdit"],[1,"text-red-400","hover:text-red-300","transition-all","duration-200","transform","hover:scale-110","p-1","rounded-md","hover:bg-red-500/20"],["iconName","iconDelete"],["colspan","4",1,"text-center","py-12"],["iconName","emptyStateIcon"],[1,"mt-2","text-sm","font-medium","text-gray-300"],[1,"mt-1","text-sm","text-gray-400"],[1,"px-6","py-4","border-t","border-slate-700","bg-slate-750"],[1,"flex-1","flex","justify-between","sm:hidden"],[1,"relative","inline-flex","items-center","px-4","py-2","text-sm","font-medium","rounded-md","transition-all","duration-200","transform","hover:scale-105","disabled:opacity-50","disabled:cursor-not-allowed","disabled:transform-none",3,"click","disabled"],["iconName","previousButtonIcon"],["iconName","nextButtonIcon"],[1,"hidden","sm:flex","sm:flex-1","sm:items-center","sm:justify-between"],[1,"font-medium","text-white"],["aria-label","Pagination",1,"relative","z-0","inline-flex","rounded-md","shadow-lg"],[1,"relative","inline-flex","items-center","px-3","py-2","rounded-l-md","text-sm","font-medium","transition-all","duration-200","transform","hover:scale-105","disabled:opacity-50","disabled:cursor-not-allowed","disabled:transform-none",3,"click","disabled"],["class","relative inline-flex items-center px-4 py-2 text-sm font-medium transition-all duration-200 transform hover:scale-105 border-t border-b",3,"class","click",4,"ngFor","ngForOf"],[1,"relative","inline-flex","items-center","px-3","py-2","rounded-r-md","text-sm","font-medium","transition-all","duration-200","transform","hover:scale-105","disabled:opacity-50","disabled:cursor-not-allowed","disabled:transform-none",3,"click","disabled"],[1,"relative","inline-flex","items-center","px-4","py-2","text-sm","font-medium","transition-all","duration-200","transform","hover:scale-105","border-t","border-b",3,"click"],[1,"text-center","py-12"]],template:function(e,r){e&1&&(i(0,"div",0)(1,"h1",1),a(2,"Manage Subscribers"),n(),i(3,"p",2),a(4,"View and manage your newsletter subscribers"),n()(),i(5,"div",3)(6,"div",4)(7,"div",5)(8,"div")(9,"p",6),a(10,"Total Subscribers"),n(),i(11,"p",7),a(12),x(13,"async"),n()(),i(14,"div",8),u(15,"app-icon",9),n()()(),i(16,"div",4)(17,"div",5)(18,"div")(19,"p",6),a(20,"Confirmed"),n(),i(21,"p",10),a(22),x(23,"async"),n()(),i(24,"div",11),u(25,"app-icon",12),n()()(),i(26,"div",4)(27,"div",5)(28,"div")(29,"p",6),a(30,"Unconfirmed"),n(),i(31,"p",13),a(32),x(33,"async"),n()(),i(34,"div",14),u(35,"app-icon",15),n()()()(),i(36,"div",16)(37,"div",17)(38,"div",18),u(39,"app-icon",19),i(40,"input",20),b("input",function(d){return r.onSearch(d)}),n()(),i(41,"div",21)(42,"button",22),b("click",function(){return r.onFilterChange("all")}),a(43," All "),n(),i(44,"button",22),b("click",function(){return r.onFilterChange("confirmed")}),a(45," Confirmed "),n(),i(46,"button",22),b("click",function(){return r.onFilterChange("unconfirmed")}),a(47," Unconfirmed "),n()()()(),h(48,ee,4,0,"div",23),x(49,"async"),h(50,te,5,1,"div",24),x(51,"async"),h(52,de,45,21,"div",25),x(53,"async"),x(54,"async")),e&2&&(s(12),f(" ",v(13,13,r.totalCount$)||0," "),s(10),f(" ",v(23,15,r.confirmedCount$)||0," "),s(10),f(" ",v(33,17,r.unconfirmedCount$)||0," "),s(8),c("value",r.searchTerm),s(2),S(r.filterType==="all"?"bg-blue-600 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"),s(2),S(r.filterType==="confirmed"?"bg-green-600 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"),s(2),S(r.filterType==="unconfirmed"?"bg-yellow-600 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"),s(2),c("ngIf",v(49,19,r.loading$)),s(2),c("ngIf",v(51,21,r.error$)),s(2),c("ngIf",!v(53,23,r.loading$)&&!v(54,25,r.error$)))},dependencies:[U,D,j,L,G],encapsulation:2})};export{Z as ManageSubscriberComponent};
